(function(e){function t(t){for(var r,a,o=t[0],c=t[1],l=t[2],m=0,d=[];m<o.length;m++)a=o[m],i[a]&&d.push(i[a][0]),i[a]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);u&&u(t);while(d.length)d.shift()();return s.push.apply(s,l||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],r=!0,o=1;o<n.length;o++){var c=n[o];0!==i[c]&&(r=!1)}r&&(s.splice(t--,1),e=a(a.s=n[0]))}return e}var r={},i={app:0},s=[];function a(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=r,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var u=c;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0510":function(e,t,n){e.exports=n.p+"img/logo_hh.343829b8.png"},"0875":function(e,t,n){},1:function(e,t){},"18b5":function(e,t,n){"use strict";var r=n("daea"),i=n.n(r);i.a},2895:function(e,t,n){},"2d2e":function(e,t,n){},"362c":function(e,t,n){},"4d83":function(e,t,n){},"4de8":function(e,t,n){"use strict";var r=n("4d83"),i=n.n(r);i.a},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var r=n("2b0e"),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("app-header",{attrs:{loggedInUser:e.loggedInUser},on:{logout:e.logout}}),e.loggedInUser?e._e():n("login",{attrs:{isError:e.loginFailed,isSignUpErr:e.signupFailed},on:{login:e.login,signup:e.signup,register:e.register}}),n("router-view"),e.memberForNotif?n("notif",{attrs:{member:e.memberForNotif,action:e.notifAction},on:{chat:e.openChatFromNotif,viewDetails:e.viewMemberDetailsFromNotif,close:function(t){e.memberForNotif=null}}}):e._e(),e.memberToChat?n("chat",{attrs:{member:e.memberToChat},on:{close:e.closeChat}}):e._e()],1)},s=[],a=(n("7f7f"),n("96cf"),n("3b8d")),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"chat-cmp flex flex-column"},[n("h1",{staticClass:"flex space-between"},[n("div",[e._v("\n      Chat with "+e._s(e.member.name)+"\n    ")]),e.isMemberTyping?n("span",{staticClass:"typing"},[e._v("typing...")]):e._e(),n("div",{on:{click:e.closeChat}},[n("font-awesome-icon",{attrs:{icon:"times",title:"close"}})],1)]),n("ul",{staticClass:"flex flex-column"},e._l(e.msgs,function(t,r){return n("li",{key:r,staticClass:"msg",class:e.getClass(t)},[e._v(e._s(t.txt))])}),0),n("div",{staticClass:"input-wrapper flex "},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.currMsg.txt,expression:"currMsg.txt"}],attrs:{autofocus:"",placeholder:"type your message..."},domProps:{value:e.currMsg.txt},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.sendMsg(t)},keydown:e.typeMsg,input:function(t){t.target.composing||e.$set(e.currMsg,"txt",t.target.value)}}}),n("div",{staticClass:"send",on:{click:e.sendMsg}},[n("font-awesome-icon",{attrs:{icon:"share",title:"send"}})],1)])])},c=[],l=n("8055"),u=n.n(l),m=u()(""),d=n("6ee6"),h=n("795b"),g=n.n(h),f=(n("ac6a"),n("7514"),n("20d6"),n("2f62")),p=n("bc3a"),v=n.n(p),b=new r["default"],y="ev-received-like",C="ev-start-chat",_="ev-chat-new-msg",k={query:U,queryMatch:A,getMemberById:F,updateNotLikeMember:O,getCities:$,watchMember:S},I="",w=v.a.create({withCredentials:!0}),M=["Tel Aviv","Beer Sheva","Bat Yam","Ramat Gan","Herzlia","Petah Tikva","Haifa"];function x(){m.on("member login",function(e){console.log("member login",e),ee.commit({type:"loginMember",memberId:e})}),m.on("member logout",function(e){console.log("member logout",e),ee.commit({type:"logoutMember",memberId:e})}),m.on("member is watching",function(e){var t=e.from;console.log("ws in","member is watching",t),ee.commit({type:"addWatchFromMember",memberId:t})}),m.on("add like",function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.from,console.log("ws in","add like",n),e.next=4,F(n);case 4:r=e.sent,ee.commit({type:"addLikeFromMember",member:r}),b.$emit(y,r);case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())}function $(){return M}function U(e){var t="".concat(I,"/user/?");return e.gender&&(t+="gender=".concat(e.gender)),e.minAge&&(t+="&&minAge=".concat(e.minAge)),e.maxAge&&(t+="&&maxAge=".concat(e.maxAge)),e.minHeight&&(t+="&&minHeight=".concat(e.minHeight)),e.city&&(t+="&&city=".concat(e.city)),w.get(t).then(function(e){return e.data})}function A(){var e="".concat(I,"/match");return w.get(e).then(function(e){return e.data})}function F(e){return w.get("".concat(I,"/user/").concat(e)).then(function(e){return e.data}).catch(function(e){return console.log("Error:",e)})}function O(e){return console.log(e),w.put("".concat(I,"/notlike"),{_id:e}).then(function(e){return console.log("member.service: updateNotLikeMember() res.data._id: ",e.data._id),e.data._id})}function S(e,t){return B.apply(this,arguments)}function B(){return B=Object(a["a"])(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)})),B.apply(this,arguments)}x();var L={query:W,add:D},T="",j=v.a.create({withCredentials:!0});function E(){m.on("like",function(e){console.log("received like",e),ee.dispatch({type:"receiveLikeFromMember",memberId:e})})}E();var R=[];function N(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"5c921ba999879a164c7df9ed";R.push(P(e,"5c921ba999879a164c7df9f5")),R.push(P(e,"5c921ba999879a164c7df9ed")),R.push(P("5c921ba999879a164c7df9f5",e,!0)),R.push(P("5c921ba999879a164c7df9ed",e,!0)),R.push(P("5c921ba999879a164c7df9ef",e,!1)),console.log("likeService. _createLikes. likes:",R)}function P(e,t,n){return{from:e,to:t,isRead:n}}function W(e){return N(e),g.a.resolve(R)}function D(e,t){return console.log("like.service:add() memberId:",t),j.put("".concat(T,"/like"),{_id:t}).then(function(n){var r={from:e,to:t};m.emit("add like",r)})}var H={login:Y,logout:J,updateUser:V,signup:X},z="",G=v.a.create({withCredentials:!0});function Y(e){return q.apply(this,arguments)}function q(){return q=Object(a["a"])(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return console.log("logging in",t),e.prev=1,e.next=4,G.post("".concat(z,"/user/login"),t);case 4:return n=e.sent,r=n.data,m.emit("login",r._id),e.abrupt("return",g.a.resolve(r));case 10:return e.prev=10,e.t0=e["catch"](1),console.log("login failed"),e.abrupt("return",g.a.reject());case 14:case"end":return e.stop()}},e,null,[[1,10]])})),q.apply(this,arguments)}function J(e){return K.apply(this,arguments)}function K(){return K=Object(a["a"])(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return console.log("loggint out"),e.next=3,G.get("".concat(z,"/user/logout"),t);case 3:return n=e.sent,m.emit("logout"),e.abrupt("return",n.data);case 6:case"end":return e.stop()}},e)})),K.apply(this,arguments)}function V(e){return Q.apply(this,arguments)}function Q(){return Q=Object(a["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return console.log("service front, updating user:",t),e.next=3,G.put("".concat(z,"/user/").concat(t._id),t).then(function(e){return console.log(e.data),e.data});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)})),Q.apply(this,arguments)}function X(e){return Z.apply(this,arguments)}function Z(){return Z=Object(a["a"])(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return console.log("signing in (ServiceClient)",t),e.prev=1,e.next=4,G.post("".concat(z,"/user/signup"),t);case 4:return n=e.sent,r=n.data,m.emit("login",r._id),e.abrupt("return",g.a.resolve(r));case 10:return e.prev=10,e.t0=e["catch"](1),console.log("signup failed! Error: ",e.t0),e.abrupt("return",g.a.reject());case 14:case"end":return e.stop()}},e,null,[[1,10]])})),Z.apply(this,arguments)}r["default"].use(f["a"]);var ee=new f["a"].Store({state:{members:[],matches:[],loggedInUser:null,chat:{msgs:[],member:null,isMemberTyping:!1}},mutations:{setMembers:function(e,t){var n=t.members;e.members=n},setMatches:function(e,t){var n=t.members;e.matches=n},setLoggedInUser:function(e,t){var n=t.user;e.loggedInUser=n},loadMemberById:function(e,t){var n=t.member,r=e.members.findIndex(function(e){return e._id===n._id});r>-1&&e.members.splice(r,1,n)},addLikeToMember:function(e,t){var n=t.member;n.likes.iLike=!0;var r=e.members.findIndex(function(e){return e._id===n._id});e.members.splice(r,1,n),console.log("added like to member",n)},addLikeFromMember:function(e,t){var n=t.member;console.log("addLikeFromMember",n.memberId);var r=e.members.find(function(e){return e._id===n._id});console.log("addLikeFromMember",r),r&&(r.likes.likeMe=!0,r.likes.isRead=!1)},addWatchFromMember:function(e,t){var n=t.memberId,r=e.loggedInUser.membersWhoWatchedMe.find(function(e){return e.id===n});r?r.date=new Date:e.loggedInUser.membersWhoWatchedMe.push({id:n,isRead:!1,date:new Date})},markWatchedMeMembersAsRead:function(e){e.loggedInUser.membersWhoWatchedMe.forEach(function(e){e.isRead=!0})},loginMember:function(e,t){var n=t.memberId,r=e.members.find(function(e){return e._id===n});r&&(r.online=!0)},logoutMember:function(e,t){var n=t.memberId,r=e.members.find(function(e){return e._id===n});r&&(r.online=!1)},removeMemberIDontLike:function(e,t){var n=t.updatedMemberId;console.log("about to remove member I dont like. memberId:",n);var r=e.members.findIndex(function(e){return e._id===n});e.members.splice(r,1)},addChatMsg:function(e,t){var n=t.msg;e.chat.msgs.push(n),e.chat.isMemberTyping=!1},startChat:function(e,t){var n=t.member;e.chat.member=n},setIsMemberTyping:function(e,t){var n=t.isTyping;e.chat.isMemberTyping=n},endChat:function(e){e.chat.member=null,e.chat.msgs=[]}},getters:{members:function(e){return e.members},matches:function(e){return e.matches},memberById:function(e){return function(t){return e.members.find(function(e){return e._id===t})}},loggedInUser:function(e){return e.loggedInUser},chatMsgs:function(e){return e.chat.msgs},isMemberTyping:function(e){return e.chat.isMemberTyping},newMembersWhoWatchedCount:function(e){if(e.loggedInUser)return e.loggedInUser.membersWhoWatchedMe.filter(function(e){return!e.isRead}).length}},actions:{loadMembers:function(e,t){var n=t.filterBy;return k.query(n).then(function(t){e.commit({type:"setMembers",members:t})})},loadMemberById:function(e,t){var n=e.commit,r=t.memberId;return k.getMemberById(r).then(function(e){return n({type:"loadMemberById",member:e}),e})},addLikeToMember:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t,n){var r,i,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,i=t.state,s=n.member,e.next=4,L.add(i.loggedInUser._id,s._id);case 4:r({type:"addLikeToMember",member:s});case 5:case"end":return e.stop()}},e)}));function t(t,n){return e.apply(this,arguments)}return t}(),updateUser:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,i=n.user,e.next=4,H.updateUser(i);case 4:r({type:"setLoggedInUser",user:i});case 5:case"end":return e.stop()}},e)}));function t(t,n){return e.apply(this,arguments)}return t}(),addNewUser:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t,n){var r,i,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,i=n.user,e.next=4,H.addNewUser(i);case 4:s=e.sent,r({type:"setLoggedInUser",user:s});case 6:case"end":return e.stop()}},e)}));function t(t,n){return e.apply(this,arguments)}return t}(),loginUser:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t,n){var r,i,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,i=n.userCredentials,e.prev=2,e.next=5,H.login(i);case 5:return s=e.sent,r({type:"setLoggedInUser",user:s}),console.log("logged in:",s._id),e.abrupt("return",g.a.resolve(s));case 11:return e.prev=11,e.t0=e["catch"](2),e.abrupt("return",g.a.reject());case 14:case"end":return e.stop()}},e,null,[[2,11]])}));function t(t,n){return e.apply(this,arguments)}return t}(),logoutUser:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,e.next=3,H.logout();case 3:n({type:"setLoggedInUser",user:null}),console.log("logged out");case 5:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}(),signupUser:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t,n){var r,i,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,i=n.userCredentials,e.prev=2,e.next=5,H.signup(i);case 5:return s=e.sent,r({type:"setLoggedInUser",user:s}),console.log("logged in:",s._id),e.abrupt("return",g.a.resolve(s));case 11:return e.prev=11,e.t0=e["catch"](2),e.abrupt("return",g.a.reject());case 14:case"end":return e.stop()}},e,null,[[2,11]])}));function t(t,n){return e.apply(this,arguments)}return t}(),loadMatches:function(e){return k.queryMatch().then(function(t){e.commit({type:"setMatches",members:t})})},notLikeMember:function(e,t){var n=e.commit,r=(e.state,t.memberId);console.log("store - action:notLikeMember() - memberId: ",r),k.updateNotLikeMember(r).then(function(e){return n({type:"removeMemberIDontLike",updatedMemberId:e})})},sendChatMsg:function(e,t){var n=e.commit,r=t.msg;te.sendMsg(r),n({type:"addChatMsg",msg:r})},startTyping:function(e,t){Object(d["a"])(e);var n=t.msg;te.startTyping(n)},finishTyping:function(e,t){Object(d["a"])(e);var n=t.msg;te.finishTyping(n)},receiveChatMsgFromMember:function(e,t){var n=e.commit,r=t.msg;n({type:"addChatMsg",msg:r}),b.$emit(_,r)},watchMember:function(e,t){var n=e.state,r=t.memberId;k.watchMember(n.loggedInUser._id,r)},markWatchedMeMembersAsRead:function(e){var t=e.commit,n=e.state;return t({type:"markWatchedMeMembersAsRead"}),H.update(n.loggedInUser)}}}),te={sendMsg:re,startTyping:ie,getEmptyMsg:ae,finishTyping:se};function ne(){m.on("chat msg",function(e){console.log("ws in:","chat msg",e),ee.dispatch({type:"receiveChatMsgFromMember",msg:e})}),m.on("chat start typing",function(e){console.log("ws in:","chat start typing",e),ee.commit({type:"setIsMemberTyping",isTyping:!0})}),m.on("chat finish typing",function(e){console.log("ws in:","chat finish typing",e),ee.commit({type:"setIsMemberTyping",isTyping:!1})})}function re(e){console.log("ws out:","chat msg",e.txt),m.emit("chat msg",e)}function ie(e){console.log("ws out:","chat start typing"),m.emit("chat start typing",e)}function se(e){console.log("ws out:","chat finish typing"),m.emit("chat finish typing",e)}function ae(e,t){return{from:e,to:t,txt:""}}ne();var oe={props:["member"],data:function(){return{currMsg:te.getEmptyMsg(this.$store.state.loggedInUser._id,this.member._id),iAmTyping:!1}},computed:{msgs:function(){return this.$store.getters.chatMsgs},isMemberTyping:function(){return this.$store.getters.isMemberTyping}},watch:{currMsg:{handler:function(e){""===e.txt&&this.iAmTyping&&(this.$store.dispatch({type:"finishTyping",msg:this.currMsg}),this.iAmTyping=!1)},deep:!0}},methods:{sendMsg:function(){this.$store.dispatch({type:"sendChatMsg",msg:this.currMsg}),this.currMsg=te.getEmptyMsg(this.$store.state.loggedInUser._id,this.member._id),this.iAmTyping=!1},getClass:function(e){var t=e.from===this.$store.state.loggedInUser._id;return{in:!t,out:t}},typeMsg:function(){this.iAmTyping||(this.$store.dispatch({type:"startTyping",msg:this.currMsg}),this.iAmTyping=!0)},closeChat:function(){this.$store.commit({type:"endChat"}),this.$emit("close")}}},ce=oe,le=(n("bf5c"),n("2877")),ue=Object(le["a"])(ce,o,c,!1,null,"38fd661e",null),me=ue.exports,de=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"login-demo-wrapper flex items-center content-center"},[e._m(0),n("div",{staticClass:"login-demo"},[e.isNewUser?e._e():n("h1",[e._v("Login")]),n("br"),e.isNewUser?e._e():n("div",{staticClass:"flex space-between"},[n("form",{on:{submit:function(t){return t.preventDefault(),e.$emit("login",e.userCredentials)}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.userCredentials.name,expression:"userCredentials.name"}],staticClass:"mr-1",attrs:{placeholder:"Username",autofocus:""},domProps:{value:e.userCredentials.name},on:{input:function(t){t.target.composing||e.$set(e.userCredentials,"name",t.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:e.userCredentials.pass,expression:"userCredentials.pass"}],staticClass:"mr-1",attrs:{placeholder:"Password"},domProps:{value:e.userCredentials.pass},on:{input:function(t){t.target.composing||e.$set(e.userCredentials,"pass",t.target.value)}}}),n("button",[e._v("Login")])])]),e.isNewUser?e._e():n("div",{staticClass:"mt-1"},[e._v("\n      Or choose a demo user:\n      "),n("button",{staticClass:"mr-1",on:{click:function(t){return e.loginDemoMale("male")}}},[e._v("Man")]),n("button",{staticClass:"mr-1",on:{click:function(t){return e.loginDemoFemale("female")}}},[e._v("Woman")]),n("br"),n("br")]),e.errMsg?n("div",{staticClass:"text-danger mt-1"},[e._v("Wrong username or password")]):e._e(),e.isNewUser?e._e():n("h3",{staticClass:"mb-1"},[e._v("First time here? Register and meet your dream")]),e.isNewUser?e._e():n("button",{on:{click:e.register}},[e._v("Register")]),e.isNewUser?n("div",{staticClass:"signup mb-1 flex"},[n("h4",{staticClass:"mb-1"},[e._v("Back to "),n("button",{on:{click:function(t){e.isNewUser=!1}}},[e._v("Login")])]),n("h1",[e._v("Signup")]),n("br"),n("h4",{staticClass:"mb-1"},[e._v("Choose your username and password")]),n("form",{on:{submit:function(t){return t.preventDefault(),e.signup(t)}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.userCredentials.name,expression:"userCredentials.name"}],staticClass:"mr-1",attrs:{placeholder:"Username",autofocus:""},domProps:{value:e.userCredentials.name},on:{input:function(t){t.target.composing||e.$set(e.userCredentials,"name",t.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:e.userCredentials.pass,expression:"userCredentials.pass"}],staticClass:"mr-1",attrs:{placeholder:"Password"},domProps:{value:e.userCredentials.pass},on:{input:function(t){t.target.composing||e.$set(e.userCredentials,"pass",t.target.value)}}}),n("button",[e._v("Signup")])])]):e._e()]),e._m(1)])},he=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"welcome-msg"},[n("h1",[e._v("Welcome to DreamDate")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"welcome-msg"},[n("h2",[e._v("Dream your love and love your dream")])])}],ge={name:"login",props:["isError","isSignUpErr"],data:function(){return{userCredentials:{name:"",pass:""},isNewUser:!1}},methods:{loginDemoFemale:function(){this.userCredentials.name="Laura",this.userCredentials.pass="123",this.$emit("login",this.userCredentials)},loginDemoMale:function(){this.userCredentials.name="Ofir",this.userCredentials.pass="123",this.$emit("login",this.userCredentials)},register:function(){this.isNewUser=!0,this.errMsg=!1,this.$emit("register")},signup:function(){this.$emit("signup",this.userCredentials),this.isNewUser=!1}},created:function(){this.errMsg=this.isError||this.isSignUpErr}},fe=ge,pe=(n("9697"),Object(le["a"])(fe,de,he,!1,null,"0e6c16ed",null)),ve=pe.exports,be=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"notif",class:e.classObj},[n("div",{staticClass:"content-wrapper flex space-between",class:e.showHideClass,on:{click:function(t){e.hide=!0}}},[n("div",{staticClass:"relative"},[n("div",{staticClass:"photo",class:e.showHideClass,on:{click:function(t){return e.doAction("view-details")}}},[n("img",{attrs:{src:e.member.mainImage}})])]),n("div",{staticClass:"content flex items-center"},["like"===e.action&&e.isMatch?n("h3",[e._v("New match "),n("br"),n("br"),e._v(e._s(e.member.name))]):e._e(),"like"!==e.action||e.isMatch?e._e():n("h3",[e._v(e._s(e.member.name)+" "),n("br"),n("br"),e._v(" likes you!")]),"chat"===e.action?n("h3",[e._v(e._s(e.member.name)+" "),n("br"),n("br"),e._v(" Wants to chat")]):e._e()]),e.isMatch?n("div",{staticClass:"chat",on:{click:function(t){return e.doAction("chat")}}},[n("div",{staticClass:"icon-container flex items-center"},[n("font-awesome-icon",{attrs:{icon:"comment",size:"4x"}})],1),n("span",[e._v("Chat")])]):e._e()]),e._m(0)])},ye=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("audio",{attrs:{id:"audio1"}},[n("source",{attrs:{src:"/assets/sounds/pop1.mp3",type:"audio/mpeg"}})])}],Ce={name:"incomingLikeNotification",props:["member","action"],data:function(){return{hide:!1,secondsToClose:5e3}},computed:{isMatch:function(){return this.member.likes.likeMe&&this.member.likes.iLike},showHideClass:function(){return{hide:this.hide,show:!this.hide}},classObj:function(){return{hide:this.hide,like:"like"===this.action,chat:"chat"===this.action}}},methods:{doAction:function(e){var t=this;setTimeout(function(){switch(e){case"chat":t.$emit("chat",t.member);break;case"view-details":t.$emit("viewDetails",t.member);break}},500)}},mounted:function(){document.querySelector("#audio1").play()},created:function(){var e=this;setTimeout(function(){return e.hide=!0},this.secondsToClose),setTimeout(function(){return e.$emit("close")},this.secondsToClose+1e3)}},_e=Ce,ke=(n("18b5"),Object(le["a"])(_e,be,ye,!1,null,"69262f61",null)),Ie=ke.exports,we=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.loggedInUser?r("header",{staticClass:"app-header flex items-center"},[r("nav",{staticClass:"flex",attrs:{id:"nav"}},[r("div",{staticClass:"logo-name"},[r("router-link",{attrs:{to:"/"}},[r("img",{staticClass:"logo",attrs:{src:n("0510"),alt:"logo"}})]),e.loggedInUser?r("div",{staticClass:"userName",staticStyle:{"margin-left":"4rem"}},[e._v("\n        Welcome, "+e._s(e.loggedInUser.name)+"\n      ")]):e._e()],1),r("div",{staticClass:"nav-links flex items-center"},[r("div",{staticClass:"nav-link",on:{click:e.getMatch}},[e._v("Matches")]),r("div",{staticClass:"nav-link",on:{click:e.toGallery}},[e._v("Gallery")]),e.loggedInUser?r("div",{staticClass:"nav-link",on:{click:e.toProfile}},[e._v("My Profile")]):e._e(),r("div",{staticClass:"nav-link",on:{click:function(t){return e.$emit("logout")}}},[e._v("Logout")])])])]):e._e()},Me=[],xe={name:"app-header",props:["loggedInUser"],methods:{getMatch:function(){this.$router.push("/match")},toProfile:function(){this.$router.push("/user/".concat(this.loggedInUser._id))},toGallery:function(){this.$router.push("/")}}},$e=xe,Ue=(n("cfdb"),Object(le["a"])($e,we,Me,!1,null,"123e2564",null)),Ae=Ue.exports,Fe=n("f499"),Oe=n.n(Fe),Se={saveToStorage:Be,getFromStorage:Le};function Be(e,t){localStorage.setItem(e,Oe()(t))}function Le(e){var t=localStorage.getItem(e);return t?JSON.parse(t):t}var Te={name:"App",data:function(){return{memberToChat:null,memberForNotif:null,loginFailed:!1,showLogin:!1,signupFailed:!1,notifAction:""}},computed:{loggedInUser:function(){return console.log("this.$store.getters.loggedInUser: ",this.$store.getters.loggedInUser),this.$store.getters.loggedInUser},newMembersWhoWatchedMeCount:function(){return this.$store.getters.newMembersWhoWatchedCount}},methods:{openNotif:function(e,t){this.memberForNotif=t,this.notifAction=e},startChat:function(e){b.$emit(C,e)},openChatFromNotif:function(e){this.memberForNotif=null,this.openChat(e)},viewMemberDetailsFromNotif:function(e){this.memberForNotif=null,this.$router.push("/member/"+e._id)},openChat:function(e){this.memberToChat=e,this.$store.commit({type:"startChat",member:e})},closeChat:function(){this.memberToChat=null},gotoMembersWhoWatchedMe:function(){this.$store.dispatch({type:"markWatchedMeMembersAsRead"}),this.$router.push("/members/watched")},login:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return console.log("user cred",t),this.loginFailed=!1,e.prev=2,e.next=5,this.$store.dispatch({type:"loginUser",userCredentials:t});case 5:n=e.sent,Se.saveToStorage("loggedInUser",n),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](2),this.loginFailed=!0;case 12:case"end":return e.stop()}},e,this,[[2,9]])}));function t(t){return e.apply(this,arguments)}return t}(),signup:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return console.log("Signing up (HOME):",t),this.signupFailed=!1,this.loginFailed=!1,e.prev=3,e.next=6,this.$store.dispatch({type:"signupUser",userCredentials:t});case 6:n=e.sent,Se.saveToStorage("loggedInUser",n),this.router.push("/user/".concat(n)),e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](3),this.signupFailed=!0;case 14:case"end":return e.stop()}},e,this,[[3,11]])}));function t(t){return e.apply(this,arguments)}return t}(),logout:function(){localStorage.removeItem("loggedInUser"),this.$store.dispatch({type:"logoutUser"})},register:function(){this.signupFailed=!1,this.loginFailed=!1}},created:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(){var t,n=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=Se.getFromStorage("loggedInUser"),!t){e.next=6;break}return e.next=4,this.login({name:t.name,pass:"123"});case 4:e.next=7;break;case 6:this.showLogin=!0;case 7:b.$on(C,function(e){console.log(C,e),n.openChat(e)}),b.$on(y,function(e){console.log(y,e),n.openNotif("like",e)}),b.$on(_,function(e){var t=e.from;console.log(_,t),n.$store.state.chat.member||n.$store.dispatch({type:"loadMemberById",memberId:t}).then(function(e){n.openNotif("chat",e)})});case 10:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),components:{chat:me,login:ve,Notif:Ie,appHeader:Ae}},je=Te,Ee=(n("5c0b"),Object(le["a"])(je,i,s,!1,null,null,null)),Re=Ee.exports,Ne=n("8c4f"),Pe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.loggedInUser?n("section",{staticClass:"home-page"},[n("member-filter",{on:{setFilter:e.setFilter}}),n("main",[n("member-list",{attrs:{members:e.members},on:{notLike:e.notLikeMember,like:e.addLike,chat:e.startChat}})],1)],1):e._e()},We=[],De=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"member-list"},[n("ul",{staticClass:"flex content-center"},e._l(e.members,function(t){return n("li",{key:t._id,staticClass:"member",attrs:{member:t}},[n("member-preview",{attrs:{member:t},on:{notLike:function(t){return e.$emit("notLike",t)},like:function(t){return e.$emit("like",t)},chat:function(t){return e.$emit("chat",t)}}})],1)}),0)])},He=[],ze=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"member-preview"},[n("router-link",{attrs:{to:"/member/"+e.member._id}},[n("div",{staticClass:"imageContainer",style:{backgroundImage:"url("+e.member.mainImage+")"}}),this.member.online?n("div",{staticClass:"status-wrapper flex space-between items-center"},[n("span",{staticClass:"online-status",class:{on:this.member.online,off:!this.member.online},attrs:{title:"Online"}})]):e._e()]),n("h2",{staticClass:"member-name"},[e._v(e._s(e.member.name)+", "+e._s(e.memberAge))]),n("div",{staticClass:"actions-wrapper"},[n("span",{staticClass:"like-status",attrs:{title:e.likeStatus},on:{click:function(t){return t.stopPropagation(),e.$emit("like",e.member)}}},[n("font-awesome-icon",{staticClass:"heart my-heart",class:{on:this.member.likes.iLike,off:!this.member.likes.iLike},attrs:{icon:"heart"}}),n("font-awesome-icon",{staticClass:"heart member-heart",class:{on:this.member.likes.likeMe,off:!this.member.likes.likeMe},attrs:{icon:"heart"}})],1),e.isMatch?n("div",{staticClass:"btn-chat",on:{click:function(t){return e.$emit("chat",e.member)}}},[n("font-awesome-icon",{attrs:{icon:"comment",title:"Click to start chat"}})],1):e._e(),n("div",[n("font-awesome-icon",{staticClass:"notLike",attrs:{icon:"times",title:"Click to remove member"},on:{click:function(t){return t.stopPropagation(),e.$emit("notLike",e.member._id)}}})],1)]),n("div",{staticClass:"member-prop"},[e._v(e._s(e.member.city)+", Israel")]),n("div",{staticClass:"member-prop"},[e._v(e._s(e.familyDesc))])],1)},Ge=[],Ye=n("e814"),qe=n.n(Ye),Je={props:["member"],computed:{memberAge:function(){var e=+this.member.dateOfBirth.substring(0,4);return(new Date).getFullYear()-e},likeStatus:function(){if(this.member.likes){if(this.member.likes.likeMe&&this.member.likes.iLike)return"YA'! You Found a Match";if(!this.member.likes.likeMe&&!this.member.likes.iLike)return"";if(this.member.likes.likeMe)return"likes you";if(this.member.likes.iLike)return"You like"}},familyDesc:function(){var e=0===qe()(this.member.numOfChildren)?"No Children":" (+".concat(this.member.numOfChildren,")");return"".concat(this.member.maritalStatus,", ").concat(e,"   ")},isMatch:function(){return this.member.likes.likeMe&&this.member.likes.iLike}}},Ke=Je,Ve=(n("4de8"),Object(le["a"])(Ke,ze,Ge,!1,null,"0dcfe861",null)),Qe=Ve.exports,Xe={props:["members"],components:{memberPreview:Qe}},Ze=Xe,et=(n("fe33"),Object(le["a"])(Ze,De,He,!1,null,"627e2e38",null)),tt=et.exports,nt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"member-filter "},[n("form",[n("div",{staticClass:"filter-sections flex"},[n("div",{staticClass:"filter-section",class:{active:"sex"===e.activeSection}},[n("button",{staticClass:"btn-filter",on:{click:function(t){return e.openFilterSection("sex")}}},[e._v("Gender")]),n("div",{staticClass:"filter-details-wrapper relative"},[n("div",{staticClass:"filter-details"},[n("el-radio-group",{attrs:{size:"small"},on:{change:e.setFilter},model:{value:e.filterBy.gender,callback:function(t){e.$set(e.filterBy,"gender",t)},expression:"filterBy.gender"}},[n("el-radio-button",{attrs:{label:"female"}}),n("el-radio-button",{attrs:{label:"male"}})],1),n("div",{staticClass:"flex content-end"},[n("a",{staticClass:"btn-apply",attrs:{href:"#"},on:{click:function(t){return e.openFilterSection("")}}},[e._v("Apply")])])],1)])]),n("div",{staticClass:"filter-section",class:{active:"city"===e.activeSection}},[n("button",{staticClass:"btn-filter",on:{click:function(t){return e.openFilterSection("city")}}},[e._v("Location")]),n("div",{staticClass:"filter-details-wrapper relative"},[n("div",{staticClass:"filter-details"},[n("el-select",{attrs:{size:"small",placeholder:"Select location"},on:{change:e.setFilter},model:{value:e.filterBy.city,callback:function(t){e.$set(e.filterBy,"city",t)},expression:"filterBy.city"}},e._l(e.cities,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),n("div",{staticClass:"flex content-end"},[n("a",{staticClass:"btn-apply",attrs:{href:"#"},on:{click:function(t){return e.openFilterSection("")}}},[e._v("Apply")])])],1)])]),n("div",{staticClass:"filter-section",class:{active:"height"===e.activeSection}},[n("button",{staticClass:"btn-filter",on:{click:function(t){return e.openFilterSection("height")}}},[e._v("Height")]),n("div",{staticClass:"filter-details-wrapper relative "},[n("div",{staticClass:"filter-details"},[n("el-input",{attrs:{size:"small",type:"number",placeholder:"Enter min-height"},on:{input:e.setFilter},model:{value:e.filterBy.minHeight,callback:function(t){e.$set(e.filterBy,"minHeight",t)},expression:"filterBy.minHeight"}}),n("div",{staticClass:"flex content-end"},[n("a",{staticClass:"btn-apply",attrs:{href:"#"},on:{click:function(t){return e.openFilterSection("")}}},[e._v("Apply")])])],1)])]),n("div",{staticClass:"filter-section",class:{active:"age"===e.activeSection}},[n("button",{staticClass:"btn-filter",on:{click:function(t){return e.openFilterSection("age")}}},[e._v("Age")]),n("div",{staticClass:"filter-details-wrapper relative "},[n("div",{staticClass:"filter-details"},[n("div",{staticClass:"age-filter"},[n("label",[e._v("Age")]),n("el-slider",{key:e.rangeKey,attrs:{range:"",min:18,max:100},on:{change:e.setFilter},model:{value:e.filterBy.age,callback:function(t){e.$set(e.filterBy,"age",t)},expression:"filterBy.age"}})],1),n("div",{staticClass:"flex content-end"},[n("a",{staticClass:"btn-apply",attrs:{href:"#"},on:{click:function(t){return e.openFilterSection("")}}},[e._v("Apply")])])])])]),n("div",{staticClass:"filter-section"},[n("button",{staticClass:"btn-filter",attrs:{type:"info"},on:{click:e.clearFilter}},[e._v("Clear Filter")])])])]),n("div",{staticClass:"relative"},[n("div",{staticClass:"filter-screen",class:{show:""!==e.activeSection},on:{click:function(t){return e.openFilterSection("")}}})])])},rt=[],it={data:function(){return{filterBy:{gender:"",age:[18,100],minHeight:null,city:""},rangeKey:1,cities:[],isShowFilter:!0,activeSection:""}},computed:{loggedInUser:function(){return this.$store.getters.loggedInUser}},methods:{openFilterSection:function(e){this.activeSection=e},setFilter:function(){var e={gender:this.filterBy.gender,minAge:this.filterBy.age[0],maxAge:this.filterBy.age[1],minHeight:this.filterBy.minHeight,city:this.filterBy.city};this.$emit("setFilter",e)},clearFilter:function(){this.filterBy={gender:"",age:[18,100],minHeight:null,city:""},this.setFilter(),this.openFilterSection("")},loggedInUserSet:function(){this.filterBy.gender=this.loggedInUser.interestedIn.gender,this.filterBy.age[0]=this.loggedInUser.interestedIn.minAge,this.filterBy.age[1]=this.loggedInUser.interestedIn.maxAge}},watch:{loggedInUser:function(){this.loggedInUser&&this.loggedInUserSet(),this.setFilter()}},created:function(){var e=k.getCities();this.cities=e.map(function(e){return{value:e,label:e}}),this.cities.unshift({value:"",label:"All cities"}),this.loggedInUser&&(this.loggedInUserSet(),this.setFilter())}},st=it,at=(n("c090"),Object(le["a"])(st,nt,rt,!1,null,"66f35a46",null)),ot=at.exports,ct=n("3d20"),lt=n.n(ct),ut={data:function(){return{filterBy:{gender:"",minAge:null,maxAge:null,minHeight:null,city:""}}},methods:{addLike:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return console.log("like"),e.next=3,this.$store.dispatch({type:"addLikeToMember",member:t});case 3:t.likes.iLike&&t.likes.likeMe&&lt.a.fire({title:"You have a new match !!!",type:"success",showCancelButton:!0,confirmButtonText:"Send a message",cancelButtonText:"Later"}).then(function(e){e.value&&b.$emit(C,t)});case 4:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),notLikeMember:function(e){this.$store.dispatch({type:"notLikeMember",memberId:e})},startChat:function(e){b.$emit(C,e)},setFilter:function(e){this.filterBy=e,this.$store.dispatch({type:"loadMembers",filterBy:this.filterBy})}},computed:{loggedInUser:function(){return this.$store.getters.loggedInUser},members:function(){return this.$store.getters.members}},created:function(){this.loggedInUser&&(this.filterBy.gender=this.loggedInUser.interestedIn.gender,this.filterBy.minAge=this.loggedInUser.interestedIn.minAge,this.filterBy.maxAge=this.loggedInUser.interestedIn.maxAge,this.$store.dispatch({type:"loadMembers",filterBy:this.filterBy}))},watched:{loggedInUser:function(){this.loggedInUser&&this.$store.dispatch({type:"loadMembers",filterBy:this.filterBy})}},components:{memberList:tt,memberFilter:ot}},mt=ut,dt=(n("e76a"),Object(le["a"])(mt,Pe,We,!1,null,"bb2be1ae",null)),ht=dt.exports,gt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.loggedInUser?n("section",{staticClass:"match-page"},[n("main",[n("member-list",{attrs:{members:e.matches}})],1)]):e._e()},ft=[],pt={data:function(){return{memberForMatch:null}},methods:{startChat:function(e){this.memberForMatch=null,b.$emit(EV_START_CHAT,e)}},computed:{loggedInUser:function(){return this.$store.getters.loggedInUser},matches:function(){return this.$store.getters.matches}},created:function(){this.loggedInUser&&this.$store.dispatch({type:"loadMatches"})},components:{memberList:tt}},vt=pt,bt=(n("fd57"),Object(le["a"])(vt,gt,ft,!1,null,"32f11a6c",null)),yt=bt.exports,Ct=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.user?n("section",{staticClass:"user-profile"},[e.isEdit||e.uploadImg?n("div",{staticClass:"screen"}):e._e(),n("div",{staticClass:"title"}),e.isEdit?n("edit-profile",{attrs:{profile:e.user,loggedInUser:e.loggedInUser},on:{addChanges:e.addChanges,close:function(t){e.isEdit=!1}}}):e._e(),e.uploadImg?n("upload-img",{attrs:{profile:e.user},on:{addChanges:e.addChanges,close:function(t){e.uploadImg=!1}}}):e._e(),n("div",{staticClass:"container"},[n("div",{staticClass:"main-section"},[n("div",{staticClass:"info"},[n("div",{staticClass:"name-section flex items-center"},[n("h2",[e._v(e._s(e.user.name)+", "+e._s(e.userAge))])]),n("hr"),n("div",{staticClass:"details-section"},[n("div",{staticClass:"gender"},[e._v(e._s(e.userGender))]),n("h4",[e._v(e._s(e.user.descr))]),n("hr"),n("h4",[e._v("Height: "+e._s(e.user.height)+"cm")]),n("h4",[e._v("I'm from "+e._s(e.user.city))]),n("h4",[e._v(e._s(e.user.maritalStatus))]),n("h4",[e._v(e._s(e.childrenInfo))]),n("hr"),n("h3",[e._v("I want to meet")]),n("h4",[e._v(e._s(e.partnerGenderNAge))]),n("div",{staticClass:"btns flex"},[n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.editProfile}},[e._v("Edit Details")]),n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){e.uploadImg=!e.uploadImg}}},[e._v("Upload pic")])],1)])]),n("div",{staticClass:"img-section"},[n("img",{staticClass:"mainImg",attrs:{src:e.user.mainImage}})])]),n("div",{staticClass:"img-gallery mt-1 mb-1"},e._l(e.user.images,function(t,r){return n("div",{key:r,staticClass:"user-img clickable",style:{backgroundImage:"url("+t+")"},on:{click:function(n){return e.changeMainImg(t,r)}}})}),0),n("div",{staticClass:"img-btns flex"},[e.saveBtn?n("el-button",{attrs:{type:"success"},on:{click:e.saveProfile}},[e._v("Save changes")]):e._e(),e.saveBtn?n("el-button",{attrs:{type:"danger"},on:{click:e.clearChanges}},[e._v("Cancel changes")]):e._e()],1)])],1):e._e()},_t=[],kt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"edit-profile flex"},[n("i",{staticClass:"el-icon-close",on:{click:function(t){return e.$emit("close")}}}),n("h1",[e._v("Edit Profile")]),n("div",{staticClass:"edit-container"},[n("div",[n("label",[e._v("I'm (gender)")]),n("el-select",{staticClass:"editInput",attrs:{size:"mini",placeholder:"Select gender"},model:{value:e.user.gender,callback:function(t){e.$set(e.user,"gender",t)},expression:"user.gender"}},e._l(e.genders,function(e,t){return n("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1)],1),n("div",[n("label",[e._v("Height")]),n("el-input-number",{staticClass:"editInput",attrs:{size:"mini"},model:{value:e.user.height,callback:function(t){e.$set(e.user,"height",t)},expression:"user.height"}})],1),n("div",[n("label",[e._v("City")]),n("el-select",{staticClass:"editInput",attrs:{size:"mini","allow-create":"",placeholder:"Choose your city"},model:{value:e.user.city,callback:function(t){e.$set(e.user,"city",t)},expression:"user.city"}},e._l(e.cities,function(e,t){return n("el-option",{key:t,attrs:{size:"mini",label:e.label,value:e.value}})}),1)],1),n("div",[n("label",[e._v("Marital status")]),n("el-select",{staticClass:"editInput",attrs:{size:"mini",placeholder:"Select your status"},model:{value:e.user.maritalStatus,callback:function(t){e.$set(e.user,"maritalStatus",t)},expression:"user.maritalStatus"}},e._l(e.statuses,function(e,t){return n("el-option",{key:t,attrs:{size:"mini",label:e.label,value:e.value}})}),1)],1),n("div",[n("label",[e._v("Children")]),n("el-input-number",{staticClass:"editInput",attrs:{size:"mini"},model:{value:e.user.numOfChildren,callback:function(t){e.$set(e.user,"numOfChildren",t)},expression:"user.numOfChildren"}})],1),n("div",[n("label",[e._v("Date of Birth")]),n("el-date-picker",{staticClass:"editInput",attrs:{type:"date",size:"mini",placeholder:"Pick a date"},model:{value:e.user.dateOfBirth,callback:function(t){e.$set(e.user,"dateOfBirth",t)},expression:"user.dateOfBirth"}})],1),n("hr"),n("h2",[e._v("Dream your partner!")]),n("h4"),n("div",[n("label",[e._v("Gender")]),n("el-select",{staticClass:"editInput",attrs:{size:"mini",placeholder:"Select gender"},model:{value:e.user.interestedIn.gender,callback:function(t){e.$set(e.user.interestedIn,"gender",t)},expression:"user.interestedIn.gender"}},e._l(e.genders,function(e,t){return n("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1)],1),n("div",[n("label",[e._v("Age")]),n("el-slider",{staticClass:"editInput",attrs:{range:"",min:18,max:120},model:{value:e.age,callback:function(t){e.age=t},expression:"age"}})],1),n("el-button",{attrs:{size:"mini",type:"info"},on:{click:e.saveProfile}},[e._v("Save Profile")])],1)])},It=[],wt={props:["profile"],data:function(){return{user:null,cities:[],statuses:[{value:"single",label:"single"},{value:"divorced",label:"divorced"},{value:"married",label:"married"},{value:"born to be free!",label:"born to be free!"}],genders:[{value:"female",label:"Woman"},{value:"male",label:"Man"}],age:[]}},created:function(){this.user=this.profile;var e=k.getCities();this.cities=e.map(function(e){return{value:e,label:e}}),this.age=[this.user.interestedIn.minAge,this.user.interestedIn.maxAge]},methods:{saveProfile:function(){this.isEdit=!1,this.saveImgBtn=!1,this.user.interestedIn.minAge=this.age[0],this.user.interestedIn.maxAge=this.age[1],this.$emit("addChanges",this.user),this.$emit("close")},editProfile:function(){this.isEdit=!0},clearChanges:function(){this.user=this.profile,this.age=[this.user.interestedIn.minAge,this.user.interestedIn.maxAge]}},computed:{userAge:function(){var e=+this.user.dateOfBirth.substring(0,4);return(new Date).getFullYear()-e},childrenInfo:function(){return this.user.numOfChildren?1===this.user.numOfChildren?"1 child":"".concat(this.user.numOfChildren," kids"):"no kids"},partnerGenderNAge:function(){return"female"===this.user.interestedIn.gender?"Woman, ".concat(this.user.interestedIn.minAge," - ").concat(this.user.interestedIn.maxAge," years old"):"Man, ".concat(this.user.interestedIn.minAge," - ").concat(this.user.interestedIn.maxAge," years old")}}},Mt=wt,xt=(n("b95d"),Object(le["a"])(Mt,kt,It,!1,null,"38beb06c",null)),$t=xt.exports,Ut=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"upload-img flex"},[n("div",{staticClass:"top"},[n("i",{staticClass:"el-icon-close close",on:{click:function(t){return t.stopPropagation(),e.$emit("close")}}})]),n("form",{staticClass:"publish-form",attrs:{action:"",enctype:"multipart/form-data"},on:{submit:function(t){return t.preventDefault(),e.previewFiles(e.event)}}},[n("label",{staticClass:"input-img",attrs:{for:"uploadPic"}},[n("input",{staticStyle:{display:"none"},attrs:{id:"uploadPic",type:"file",name:"img",multiple:""},on:{change:e.previewFiles}}),e._v("\n          Upload Picture\n        ")])]),n("div",{staticClass:"preview",style:{backgroundImage:"url("+e.newImg+")"}}),e.saveImgBtn?n("el-button",{attrs:{type:"success",plain:""},on:{click:function(t){return t.stopPropagation(),e.saveImg(t)}}},[e._v("Save")]):e._e()],1)},At=[],Ft={uploadImg:Lt},Ot="dgdlcsa7",St="dgo4v1hnv",Bt="https://api.cloudinary.com/v1_1/".concat(St,"/image/upload");function Lt(e,t){return console.log("Cloudinary service got:",e,t),t.preventDefault(),Tt(e).then(function(e){return e})}function Tt(e){var t=new FormData;return t.append("file",e),t.append("upload_preset",Ot),v()({url:Bt,method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:t}).then(function(e){return console.log("SECURE_URL:",e.data.secure_url),e.data.secure_url}).catch(function(e){console.error("Upload failed! Err: ",e)})}var jt={props:["profile"],data:function(){return{user:null,newImg:null,saveImgBtn:!1}},methods:{previewFiles:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.target.files[0],console.log("file:",n,"event",t),e.next=4,Ft.uploadImg(n,t);case 4:r=e.sent,this.newImg=r,this.saveImgBtn=!0;case 7:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),saveImg:function(){this.user.mainImage?this.user.images.push(this.newImg):this.user.mainImage=this.newImg,this.$emit("addChanges",this.user),this.saveImgBtn=!1}},created:function(){console.log("created, user:",this.profile),this.user=this.profile}},Et=jt,Rt=(n("a0db"),Object(le["a"])(Et,Ut,At,!1,null,"3e301901",null)),Nt=Rt.exports,Pt={data:function(){return{user:null,saveBtn:!1,isEdit:!1,uploadImg:!1}},created:function(){var e=this,t=this.$route.params.userId;this.loggedInUser&&this.loggedInUser._id===t?this.$store.dispatch({type:"loadMemberById",memberId:t}).then(function(t){return e.user=t}):this.$router.push("/"),console.log("LoggedInUser",this.loggedInUser)},methods:{addChanges:function(e){this.user=e,this.isEdit=!1,this.uploadImg=!1,this.saveBtn=!0},changeMainImg:function(e,t){var n=this.user.mainImage;this.user.mainImage=e,this.user.images.splice(t,1,n),this.saveBtn=!0},saveProfile:function(){this.isEdit=!1,this.uploadImg=!1,console.log("Save updated PROFILE: ",this.user),this.$store.dispatch({type:"updateUser",user:this.user}),this.saveBtn=!1},editProfile:function(){this.isEdit=!0},clearChanges:function(){this.user=this.loggedInUser,this.age=[this.user.interestedIn.minAge,this.user.interestedIn.maxAge]},toAll:function(){this.$router.push("/")}},computed:{loggedInUser:function(){return this.$store.getters.loggedInUser},userAge:function(){var e=+this.user.dateOfBirth.substring(0,4),t=(new Date).getFullYear()-e;return t||18},childrenInfo:function(){return 0===this.user.numOfChildren?"I don't have kids":1===this.user.numOfChildren?"I have 1 child":"I have ".concat(this.user.numOfChildren," kids")},partnerGenderNAge:function(){return this.user.interestedIn.gender&&this.user.interestedIn.minAge&&this.user.interestedIn.maxAge?"female"===this.user.interestedIn.gender?"Woman, ".concat(this.user.interestedIn.minAge," - ").concat(this.user.interestedIn.maxAge," years old"):"Man, ".concat(this.user.interestedIn.minAge," - ").concat(this.user.interestedIn.maxAge," years old"):"..."},userGender:function(){return"female"===this.user.gender?"Woman":"male"===this.user.gender?"Woman":"Gender is not defined"}},watch:{loggedInUser:function(){var e=this.$route.params.userId;this.loggedInUser&&this.loggedInUser._id===e||this.$router.push("/")}},components:{editProfile:$t,uploadImg:Nt}},Wt=Pt,Dt=(n("d3bf"),Object(le["a"])(Wt,Ct,_t,!1,null,"628df267",null)),Ht=Dt.exports,zt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.member?n("section",{staticClass:"member-details"},[n("div",{staticClass:"container"},[n("div",{staticClass:"main-section"},[n("div",{staticClass:"info"},[n("div",{staticClass:"name-section flex items-center content-center"},[n("span",{staticClass:"online-status mr-1",class:{on:this.member.online,off:!this.member.online}}),n("h1",[e._v(e._s(e.member.name)+", "+e._s(e.memberAge))])]),n("div",{staticClass:"details flex"},[n("hr"),n("h4",[e._v(e._s(e.member.descr))]),n("hr"),n("h4",[e._v("Height: "+e._s(e.member.height)+"cm")]),n("h4",[e._v("I'm from "+e._s(e.member.city))]),n("h4",[e._v("I'm "+e._s(e.member.maritalStatus))]),n("h4",[e._v("I have "+e._s(e.childrenInfo))]),n("hr"),n("h2",[e._v("I want to meet:")]),n("h4",[e._v(e._s(e.partnerGenderNAge))])])]),n("div",{staticClass:"main-img"},[n("div",{staticClass:"mainImg",style:{backgroundImage:"url("+e.member.mainImage+")"}}),n("div",{staticClass:"likes-panel clickable"},[n("font-awesome-icon",{attrs:{icon:"heart"},on:{click:function(t){return t.stopPropagation(),e.like(t)}}}),n("font-awesome-icon",{attrs:{icon:"times"},on:{click:function(t){return t.stopPropagation(),e.notLike(t)}}})],1)])]),n("div",{staticClass:"img-gallery mt-1 mb-1"},e._l(e.member.images,function(t,r){return n("div",{key:r,staticClass:"member-img clickable",style:{backgroundImage:"url("+t+")"},on:{click:function(n){return e.changeMainImg(t,r)}}})}),0)])]):e._e()},Gt=[],Yt={data:function(){return{member:null}},methods:{changeMainImg:function(e,t){var n=this.member.mainImage;this.member.mainImage=e,this.member.images.splice(t,1,n)}},computed:{memberAge:function(){var e=+this.member.dateOfBirth.substring(0,4);return(new Date).getFullYear()-e},childrenInfo:function(){return this.member.numOfChildren?1===this.member.numOfChildren?"1 child":"".concat(this.member.numOfChildren," kids"):"no kids"},partnerGenderNAge:function(){return"female"===this.member.interestedIn.gender?"Woman, ".concat(this.member.interestedIn.minAge," - ").concat(this.member.interestedIn.maxAge," years old"):"Man, ".concat(this.member.interestedIn.minAge," - ").concat(this.member.interestedIn.maxAge," years old")}},created:function(){var e=this,t=this.$route.params.userId;this.$store.dispatch({type:"loadMemberById",memberId:t}).then(function(t){return e.member=t}),this.$store.dispatch({type:"watchMember",memberId:t})}},qt=Yt,Jt=(n("5e91"),Object(le["a"])(qt,zt,Gt,!1,null,"138cddd2",null)),Kt=Jt.exports,Vt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",[e._v("user profile edit")])},Qt=[],Xt={},Zt=Xt,en=Object(le["a"])(Zt,Vt,Qt,!1,null,null,null),tn=en.exports;r["default"].use(Ne["a"]);var nn=new Ne["a"]({routes:[{path:"/",component:ht},{path:"/match",component:yt},{path:"/user/edit/:userId?",component:tn},{path:"/user/:userId",component:Ht},{path:"/member/:userId",component:Kt}]}),rn=n("9483");Object(rn["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});var sn=n("ecee"),an=n("ad3d"),on=n("c074"),cn=n("5c96"),ln=n.n(cn),un=n("b2d6"),mn=n.n(un);n("0fae"),n("f572");sn["c"].add(on["b"]),sn["c"].add(on["d"]),sn["c"].add(on["a"]),sn["c"].add(on["c"]),r["default"].component("font-awesome-icon",an["a"]),r["default"].use(ln.a,{locale:mn.a}),r["default"].config.productionTip=!1,new r["default"]({router:nn,store:ee,render:function(e){return e(Re)}}).$mount("#app")},"5c0b":function(e,t,n){"use strict";var r=n("5e27"),i=n.n(r);i.a},"5e27":function(e,t,n){},"5e91":function(e,t,n){"use strict";var r=n("2d2e"),i=n.n(r);i.a},"6ab2":function(e,t,n){},"77bf":function(e,t,n){},"89d4":function(e,t,n){},9317:function(e,t,n){},9697:function(e,t,n){"use strict";var r=n("362c"),i=n.n(r);i.a},a0db:function(e,t,n){"use strict";var r=n("f784"),i=n.n(r);i.a},a9b4:function(e,t,n){},b95d:function(e,t,n){"use strict";var r=n("77bf"),i=n.n(r);i.a},bf5c:function(e,t,n){"use strict";var r=n("a9b4"),i=n.n(r);i.a},c090:function(e,t,n){"use strict";var r=n("efae"),i=n.n(r);i.a},cfdb:function(e,t,n){"use strict";var r=n("2895"),i=n.n(r);i.a},d3bf:function(e,t,n){"use strict";var r=n("6ab2"),i=n.n(r);i.a},daea:function(e,t,n){},e76a:function(e,t,n){"use strict";var r=n("89d4"),i=n.n(r);i.a},efae:function(e,t,n){},f572:function(e,t,n){},f784:function(e,t,n){},fd57:function(e,t,n){"use strict";var r=n("0875"),i=n.n(r);i.a},fe33:function(e,t,n){"use strict";var r=n("9317"),i=n.n(r);i.a}});
//# sourceMappingURL=app.6d7e6582.js.map