(function(e){function t(t){for(var s,a,o=t[0],c=t[1],l=t[2],m=0,d=[];m<o.length;m++)a=o[m],i[a]&&d.push(i[a][0]),i[a]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(e[s]=c[s]);u&&u(t);while(d.length)d.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],s=!0,o=1;o<n.length;o++){var c=n[o];0!==i[c]&&(s=!1)}s&&(r.splice(t--,1),e=a(a.s=n[0]))}return e}var s={},i={app:0},r=[];function a(t){if(s[t])return s[t].exports;var n=s[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=s,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)a.d(n,s,function(t){return e[t]}.bind(null,s));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var u=c;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0510":function(e,t,n){e.exports=n.p+"img/logo_hh.343829b8.png"},1:function(e,t){},"18b5":function(e,t,n){"use strict";var s=n("daea"),i=n.n(s);i.a},"1f81":function(e,t,n){"use strict";var s=n("52f7"),i=n.n(s);i.a},"23ef":function(e,t,n){"use strict";var s=n("d029"),i=n.n(s);i.a},"2b3d":function(e,t,n){"use strict";var s=n("6b3d"),i=n.n(s);i.a},"340a":function(e,t,n){},3551:function(e,t,n){},"379b":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAANNSURBVGhD7dpZyE1fHMbx15AxmUNkyCwuyA1XQkiJQqRkvDCWIZRSMkYk5S9T5AJXSpmKG8qFQgqhxAXKEH8yz3wf2fVrWefsM+x1zt56n/qkd3v3Wvt3zh7WXuutqU3lU/fPv8HTDTOwFxfxGG/xE9/wP+7iBDZiFJoiLnWwD19wFR2QeFpgKa5BB1ysDziGMdAB+zIUdp9tSCytoQbfwXZSjpuYAregabC/dwRlR53MxSvYxvP5iO/Otnx0WvZHlMQL0bdwFrZR6xNOYwWGoSPsp9sQfTERO3AbvnZExS+E9k+0kH54ANtg5B7UaUsUm4E4AH0IvrYPQjcQu63kQgbjBWxjom0LUB/lpjOOwu1Dnjk/l1TIAPiKOIV2SDrj8Rxuf1bRhbTBQ7gNbUKuW2WpaQSdmjIIuU5jKaoQHajvwt6AJKN+/sNXuH3lUlQhusW6DexG0tGp6/YTp+BCdJt9CbvzSYQY63TBD9i+4hRcyBbYHXXxhbiwo8zCddwvkJ5BsdHF9h62kHnIXJbAFqGHXRLPiYrHHcUuRuaip6u98D6jFTKXmbDfhp4jmYweTLaQlchkLsEWMhyZzCPYQjohrdG7Ts7o4raFpPG2q2OKhvt34H1Q2yL0hpbGjIQ9zlX4K/Y9QFM5aYx7Z/UOZHWX0n9qSL1MG1KY2bCFbIc3usA1QZDWdIUtZDQyG10nhzAWSb+p1iZopuI89qOBNqQkGtROhya/Y6Nfti9We5CGaLI8Gnlo+lVzxHnTB1ERoltxd1Q7a2GPazPyRneBG7A7HUe18xT2mOYjNprtszvJCFQzWiiKjkWnWGPERt/KBdhC1qOa0Tegt1etemmmv+D0hMZbKkINaDa+2il5NN4cc9D790+VjeaCK7b4GSI6rTV4fQ1NoE9GkDSBFl/OYBHqIalo+vQc7LWpO2iQbIXtSFOd41Du4E2n0i3YtkWFBckuuJ3JZZSz/q3bu9vmE9hF0UTTA+rA7VSWw5f20DLFauiD2Al3YqMZ3iBqSyti2i9otJKlMZi7OLMGbvTu4Fvo1IquOyBtC30Y2qei6QWNkK/gMHwjZf05h1uE6Emd5I0ieCbAV0iI1a/gmQRNEqyDlrOHoDb/eGpqfgHURqZcYU1olAAAAABJRU5ErkJggg=="},"52f7":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var s=n("2b0e"),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("app-header",{attrs:{loggedInUser:e.loggedInUser},on:{logout:e.logout}}),e.loggedInUser?e._e():n("login",{attrs:{hasError:e.loginFailed},on:{login:e.login,signup:e.signup}}),n("router-view"),e.memberForNotif?n("notif",{attrs:{member:e.memberForNotif,action:e.notifAction},on:{chat:e.openChatFromNotif,viewDetails:e.viewMemberDetailsFromNotif,close:function(t){e.memberForNotif=null}}}):e._e(),e.memberToChat?n("chat",{attrs:{member:e.memberToChat},on:{close:e.closeChat}}):e._e()],1)},r=[],a=(n("7f7f"),n("96cf"),n("3b8d")),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"chat-cmp flex flex-column"},[n("div",{staticClass:"header flex space-between"},[n("div",[e._v("\n      Chat with "+e._s(e.member.name)+"\n    ")]),e.isMemberTyping?n("span",{staticClass:"typing"},[e._v("typing...")]):e._e(),n("div",{on:{click:e.closeChat}},[n("font-awesome-icon",{attrs:{icon:"times",title:"close"}})],1)]),n("ul",{staticClass:"flex flex-column"},e._l(e.msgs,function(t,s){return n("li",{key:s,staticClass:"msg",class:e.getClass(t)},[e._v(e._s(t.txt))])}),0),n("div",{staticClass:"input-wrapper flex "},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.currMsg.txt,expression:"currMsg.txt"}],attrs:{autofocus:"",placeholder:"type your message..."},domProps:{value:e.currMsg.txt},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.sendMsg(t)},keydown:e.typeMsg,input:function(t){t.target.composing||e.$set(e.currMsg,"txt",t.target.value)}}}),n("div",{staticClass:"send",on:{click:e.sendMsg}},[n("font-awesome-icon",{attrs:{icon:"share",title:"send"}})],1)])])},c=[],l=n("8055"),u=n.n(l),m=u()(""),d=n("6ee6"),g=n("795b"),h=n.n(g),f=(n("ac6a"),n("7514"),n("20d6"),n("2f62")),p=n("bc3a"),b=n.n(p),v=b.a.create({withCredentials:!0}),y=new s["default"],C="ev-received-like",k="ev-start-chat",I="ev-chat-new-msg",w={query:U,queryMatch:O,getMemberById:S,updateNotLikeMember:$,getCities:x,watchMember:B},_="",A=["Tel Aviv","Beer Sheva","Bat Yam","Ramat Gan","Herzlia","Petah Tikva","Haifa"];function M(){m.on("member login",function(e){console.log("member login",e),J.commit({type:"loginMember",memberId:e})}),m.on("member logout",function(e){console.log("member logout",e),J.commit({type:"logoutMember",memberId:e})}),m.on("member is watching",function(e){var t=e.from;console.log("ws in","member is watching",t),J.commit({type:"addWatchFromMember",memberId:t})}),m.on("add like",function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t){var n,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.from,console.log("ws in","add like",n),e.next=4,S(n);case 4:s=e.sent,J.commit({type:"addLikeFromMember",member:s}),y.$emit(C,s);case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())}function x(){return A}function U(e){var t="".concat(_,"/user/?");return e.gender&&(t+="gender=".concat(e.gender)),e.minAge&&(t+="&&minAge=".concat(e.minAge)),e.maxAge&&(t+="&&maxAge=".concat(e.maxAge)),e.minHeight&&(t+="&&minHeight=".concat(e.minHeight)),e.city&&(t+="&&city=".concat(e.city)),v.get(t).then(function(e){return e.data})}function O(){var e="".concat(_,"/match");return v.get(e).then(function(e){return e.data})}function S(e){return v.get("".concat(_,"/user/").concat(e)).then(function(e){return e.data}).catch(function(e){return console.log("Error:",e)})}function $(e){return console.log(e),v.put("".concat(_,"/notlike"),{_id:e}).then(function(e){return console.log("member.service: updateNotLikeMember() res.data._id: ",e.data._id),e.data._id})}function B(e,t){return F.apply(this,arguments)}function F(){return F=Object(a["a"])(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)})),F.apply(this,arguments)}M();var R={query:D,add:P},j="";function E(){m.on("like",function(e){console.log("received like",e),J.dispatch({type:"receiveLikeFromMember",memberId:e})})}E();var T=[];function L(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"5c921ba999879a164c7df9ed";T.push(N(e,"5c921ba999879a164c7df9f5")),T.push(N(e,"5c921ba999879a164c7df9ed")),T.push(N("5c921ba999879a164c7df9f5",e,!0)),T.push(N("5c921ba999879a164c7df9ed",e,!0)),T.push(N("5c921ba999879a164c7df9ef",e,!1)),console.log("likeService. _createLikes. likes:",T)}function N(e,t,n){return{from:e,to:t,isRead:n}}function D(e){return L(e),h.a.resolve(T)}function P(e,t){return console.log("like.service:add() memberId:",t),v.put("".concat(j,"/like"),{_id:t}).then(function(n){var s={from:e,to:t};m.emit("add like",s)})}var W={login:G,logout:z,updateUser:K,signup:q},H="";function G(e){return Q.apply(this,arguments)}function Q(){return Q=Object(a["a"])(regeneratorRuntime.mark(function e(t){var n,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return console.log("logging in",t),e.prev=1,e.next=4,v.post("".concat(H,"/user/login"),t);case 4:return n=e.sent,s=n.data,m.emit("login",s._id),e.abrupt("return",h.a.resolve(s));case 10:return e.prev=10,e.t0=e["catch"](1),console.log("login failed",e.t0),e.abrupt("return",h.a.reject());case 14:case"end":return e.stop()}},e,null,[[1,10]])})),Q.apply(this,arguments)}function z(e){return Y.apply(this,arguments)}function Y(){return Y=Object(a["a"])(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return console.log("loggint out"),e.next=3,v.get("".concat(H,"/user/logout"),t);case 3:return n=e.sent,m.emit("logout"),e.abrupt("return",n.data);case 6:case"end":return e.stop()}},e)})),Y.apply(this,arguments)}function K(e){return Z.apply(this,arguments)}function Z(){return Z=Object(a["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return console.log("service front, updating user:",t),e.next=3,v.put("".concat(H,"/user/").concat(t._id),t).then(function(e){return console.log(e.data),e.data});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)})),Z.apply(this,arguments)}function q(e){return X.apply(this,arguments)}function X(){return X=Object(a["a"])(regeneratorRuntime.mark(function e(t){var n,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return console.log("signing in (ServiceClient)",t),e.prev=1,e.next=4,v.post("".concat(H,"/user/signup"),t);case 4:return n=e.sent,s=n.data,m.emit("login",s._id),e.abrupt("return",h.a.resolve(s));case 10:return e.prev=10,e.t0=e["catch"](1),console.log("signup failed! Error: ",e.t0),e.abrupt("return",h.a.reject());case 14:case"end":return e.stop()}},e,null,[[1,10]])})),X.apply(this,arguments)}s["default"].use(f["a"]);var J=new f["a"].Store({state:{members:[],matches:[],msgs:[],loggedInUser:null,chat:{msgs:[],member:null,isMemberTyping:!1}},mutations:{setMembers:function(e,t){var n=t.members;e.members=n},setMatches:function(e,t){var n=t.members;e.matches=n},setLoggedInUser:function(e,t){var n=t.user;e.loggedInUser=n},loadMemberById:function(e,t){var n=t.member,s=e.members.findIndex(function(e){return e._id===n._id});s>-1&&e.members.splice(s,1,n)},addLikeToMember:function(e,t){var n=t.member;n.likes.iLike=!0;var s=e.members.findIndex(function(e){return e._id===n._id});e.members.splice(s,1,n),console.log("added like to member",n)},addLikeFromMember:function(e,t){var n=t.member;console.log("addLikeFromMember",n.memberId);var s=e.members.find(function(e){return e._id===n._id});console.log("addLikeFromMember",s),s&&(s.likes.likeMe=!0,s.likes.isRead=!1)},addWatchFromMember:function(e,t){var n=t.memberId,s=e.loggedInUser.membersWhoWatchedMe.find(function(e){return e.id===n});s?s.date=new Date:e.loggedInUser.membersWhoWatchedMe.push({id:n,isRead:!1,date:new Date})},markWatchedMeMembersAsRead:function(e){e.loggedInUser.membersWhoWatchedMe.forEach(function(e){e.isRead=!0})},loginMember:function(e,t){var n=t.memberId,s=e.members.find(function(e){return e._id===n});s&&(s.online=!0)},logoutMember:function(e,t){var n=t.memberId,s=e.members.find(function(e){return e._id===n});s&&(s.online=!1)},removeMemberIDontLike:function(e,t){var n=t.updatedMemberId;console.log("about to remove member I dont like. memberId:",n);var s=e.members.findIndex(function(e){return e._id===n});e.members.splice(s,1)},addChatMsg:function(e,t){var n=t.msg;e.chat.msgs.push(n),e.chat.isMemberTyping=!1},addChatHistoryMsgs:function(e,t){var n=t.msgs;e.chat.msgs=n},startChat:function(e,t){var n=t.member;e.chat.member=n},setIsMemberTyping:function(e,t){var n=t.isTyping;e.chat.isMemberTyping=n},endChat:function(e){e.chat.member=null,e.chat.msgs=[]},addMsgs:function(e,t){var n=t.msgs;e.msgs=n}},getters:{members:function(e){return e.members},matches:function(e){return e.matches},memberById:function(e){return function(t){return e.members.find(function(e){return e._id===t})}},loggedInUser:function(e){return e.loggedInUser},chatMsgs:function(e){return e.chat.msgs},isMemberTyping:function(e){return e.chat.isMemberTyping},newMembersWhoWatchedCount:function(e){if(e.loggedInUser)return e.loggedInUser.membersWhoWatchedMe.filter(function(e){return!e.isRead}).length},msgs:function(e){return e.msgs}},actions:{loadMembers:function(e,t){var n=t.filterBy;return w.query(n).then(function(t){e.commit({type:"setMembers",members:t})})},loadMemberById:function(e,t){var n=e.commit,s=t.memberId;return w.getMemberById(s).then(function(e){return n({type:"loadMemberById",member:e}),e})},addLikeToMember:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t,n){var s,i,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return s=t.commit,i=t.state,r=n.member,e.next=4,R.add(i.loggedInUser._id,r._id);case 4:s({type:"addLikeToMember",member:r});case 5:case"end":return e.stop()}},e)}));function t(t,n){return e.apply(this,arguments)}return t}(),updateUser:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t,n){var s,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return s=t.commit,i=n.user,e.next=4,W.updateUser(i);case 4:s({type:"setLoggedInUser",user:i});case 5:case"end":return e.stop()}},e)}));function t(t,n){return e.apply(this,arguments)}return t}(),addNewUser:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t,n){var s,i,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return s=t.commit,i=n.user,e.next=4,W.addNewUser(i);case 4:r=e.sent,s({type:"setLoggedInUser",user:r});case 6:case"end":return e.stop()}},e)}));function t(t,n){return e.apply(this,arguments)}return t}(),loginUser:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t,n){var s,i,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return s=t.commit,i=n.userCredentials,e.prev=2,e.next=5,W.login(i);case 5:return r=e.sent,s({type:"setLoggedInUser",user:r}),console.log("logged in:",r._id),e.abrupt("return",h.a.resolve(r));case 11:return e.prev=11,e.t0=e["catch"](2),e.abrupt("return",h.a.reject());case 14:case"end":return e.stop()}},e,null,[[2,11]])}));function t(t,n){return e.apply(this,arguments)}return t}(),logoutUser:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,e.next=3,W.logout();case 3:n({type:"setLoggedInUser",user:null}),console.log("logged out");case 5:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}(),signupUser:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t,n){var s,i,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return s=t.commit,i=n.userCredentials,e.prev=2,e.next=5,W.signup(i);case 5:return r=e.sent,s({type:"setLoggedInUser",user:r}),console.log("logged in:",r._id),e.abrupt("return",h.a.resolve(r));case 11:return e.prev=11,e.t0=e["catch"](2),e.abrupt("return",h.a.reject());case 14:case"end":return e.stop()}},e,null,[[2,11]])}));function t(t,n){return e.apply(this,arguments)}return t}(),loadMatches:function(e){return w.queryMatch().then(function(t){e.commit({type:"setMatches",members:t})})},notLikeMember:function(e,t){var n=e.commit,s=(e.state,t.memberId);console.log("store - action:notLikeMember() - memberId: ",s),w.updateNotLikeMember(s).then(function(e){return n({type:"removeMemberIDontLike",updatedMemberId:e})})},sendChatMsg:function(e,t){var n=e.commit,s=t.msg;V.sendMsg(s),n({type:"addChatMsg",msg:s})},startTyping:function(e,t){Object(d["a"])(e);var n=t.msg;V.startTyping(n)},finishTyping:function(e,t){Object(d["a"])(e);var n=t.msg;V.finishTyping(n)},receiveChatMsgFromMember:function(e,t){var n=e.commit,s=t.msg;n({type:"addChatMsg",msg:s}),y.$emit(I,s)},watchMember:function(e,t){var n=e.state,s=t.memberId;w.watchMember(n.loggedInUser._id,s)},markWatchedMeMembersAsRead:function(e){var t=e.commit,n=e.state;return t({type:"markWatchedMeMembersAsRead"}),W.update(n.loggedInUser)},getMsgHistory:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t,n){var s,i,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return s=t.commit,i=n.memberId,e.next=4,V.getMsgHistory(i);case 4:r=e.sent,s({type:"addChatHistoryMsgs",msgs:r});case 6:case"end":return e.stop()}},e)}));function t(t,n){return e.apply(this,arguments)}return t}(),getTopMsgs:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t){var n,s,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,s=t.state,e.next=3,V.getTopMsgs(s.loggedInUser._id);case 3:i=e.sent,n({type:"addMsgs",msgs:i});case 5:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()}}),V={sendMsg:ne,startTyping:se,getEmptyMsg:re,finishTyping:ie,getMsgHistory:ae,getTopMsgs:oe},ee="";function te(){m.on("chat msg",function(e){console.log("ws in:","chat msg",e),J.dispatch({type:"receiveChatMsgFromMember",msg:e})}),m.on("chat start typing",function(e){console.log("ws in:","chat start typing",e),J.commit({type:"setIsMemberTyping",isTyping:!0})}),m.on("chat finish typing",function(e){console.log("ws in:","chat finish typing",e),J.commit({type:"setIsMemberTyping",isTyping:!1})})}function ne(e){console.log("ws out:","chat msg",e.txt),m.emit("chat msg",e)}function se(e){console.log("ws out:","chat start typing"),m.emit("chat start typing",e)}function ie(e){console.log("ws out:","chat finish typing"),m.emit("chat finish typing",e)}function re(e,t){return{from:e,to:t,txt:""}}function ae(e){return v.get("".concat(ee,"/msg/").concat(e)).then(function(e){return console.log("msg history",e.data),e.data})}function oe(){return v.get("".concat(ee,"/msg")).then(function(e){return console.log("msg get all",e.data),e.data})}te();var ce={props:["member"],data:function(){return{currMsg:V.getEmptyMsg(this.$store.state.loggedInUser._id,this.member._id),iAmTyping:!1}},computed:{msgs:function(){return this.$store.getters.chatMsgs},isMemberTyping:function(){return this.$store.getters.isMemberTyping}},watch:{currMsg:{handler:function(e){""===e.txt&&this.iAmTyping&&(this.$store.dispatch({type:"finishTyping",msg:this.currMsg}),this.iAmTyping=!1)},deep:!0}},methods:{sendMsg:function(){this.$store.dispatch({type:"sendChatMsg",msg:this.currMsg}),this.currMsg=V.getEmptyMsg(this.$store.state.loggedInUser._id,this.member._id),this.iAmTyping=!1},getClass:function(e){var t=e.from===this.$store.state.loggedInUser._id;return{in:!t,out:t}},typeMsg:function(){this.iAmTyping||(this.$store.dispatch({type:"startTyping",msg:this.currMsg}),this.iAmTyping=!0)},closeChat:function(){this.$store.commit({type:"endChat"}),this.$emit("close")}},created:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return console.log("chat cmp created"),e.next=3,this.$store.dispatch({type:"getMsgHistory",memberId:this.member._id});case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},le=ce,ue=(n("970d"),n("2877")),me=Object(ue["a"])(le,o,c,!1,null,"17d8e642",null),de=me.exports,ge=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",[n("div",{staticClass:"wrapper flex items-center"},[n("div",{staticClass:"login-wrapper flex content-center"},[n("div",{staticClass:"content"},[n("h1",{staticClass:"flex space-between items-center mb-5"},[e._v("\n          "+e._s(e.isNewUser?"Sign up":"Login")+"  \n          "),n("button",{staticClass:"btn",on:{click:e.flip}},[e._v("\n            "+e._s(e.isNewUser?"Login":"Sign up")+" \n          ")])]),n("form",{staticClass:"flex flex-column space-between align-start",on:{submit:function(t){return t.preventDefault(),e.submit(t)}}},[n("div",{staticClass:"flex space-between mb-5 demo-login",class:{invisible:e.isNewUser}},[n("button",{staticClass:"btn btn-demo-man mr-2",attrs:{type:"button"},on:{click:function(t){return e.loginDemoMale("male")}}},[e._v("Demo user "),n("br"),e._v(" Man")]),n("button",{staticClass:"btn btn-demo-woman",attrs:{type:"button"},on:{click:function(t){return e.loginDemoFemale("female")}}},[e._v("Demo user "),n("br"),e._v(" Woman")])]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.userCredentials.name,expression:"userCredentials.name"}],staticClass:"input",attrs:{placeholder:"Username",autofocus:""},domProps:{value:e.userCredentials.name},on:{input:function(t){t.target.composing||e.$set(e.userCredentials,"name",t.target.value)}}}),n("br"),n("input",{directives:[{name:"model",rawName:"v-model",value:e.userCredentials.pass,expression:"userCredentials.pass"}],staticClass:"input",attrs:{placeholder:"Password",type:"password"},domProps:{value:e.userCredentials.pass},on:{input:function(t){t.target.composing||e.$set(e.userCredentials,"pass",t.target.value)}}}),n("br"),n("div",[n("button",{staticClass:"btn btn-login",attrs:{type:"submit"}},[e._v("\n              "+e._s(e.isNewUser?"Sign up":"Login")+"\n            ")])])]),n("div",{staticClass:"text-danger mt-1",class:{invisible:!e.isShowErr}},[e._v("Wrong username or password")])])])]),n("div",{staticClass:"screen"})])},he=[],fe={name:"login",props:["hasError"],data:function(){return{userCredentials:{name:"",pass:""},isNewUser:!1,isShowErr:!1}},methods:{loginDemoFemale:function(){this.userCredentials.name="Laura",this.userCredentials.pass="123",this.$emit("login",this.userCredentials)},loginDemoMale:function(){this.userCredentials.name="Ofir",this.userCredentials.pass="123",this.$emit("login",this.userCredentials)},submit:function(){var e=this.isNewUser?"signup":"login";this.$emit(e,this.userCredentials)},flip:function(){this.isNewUser=!this.isNewUser,this.isShowErr=!1,this.userCredentials={name:"",pass:""}}},watch:{hasError:function(){this.isShowErr=this.hasError}}},pe=fe,be=(n("6d69"),Object(ue["a"])(pe,ge,he,!1,null,"0c3253bc",null)),ve=be.exports,ye=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"notif",class:e.classObj},[n("div",{staticClass:"content-wrapper flex space-between",class:e.showHideClass,on:{click:function(t){e.hide=!0}}},[n("div",{staticClass:"relative"},[n("div",{staticClass:"photo",class:e.showHideClass,on:{click:function(t){return e.doAction("view-details")}}},[n("img",{attrs:{src:e.member.mainImage}})])]),n("div",{staticClass:"content flex items-center"},["like"===e.action&&e.isMatch?n("h3",[e._v("New match "),n("br"),n("br"),e._v(e._s(e.member.name))]):e._e(),"like"!==e.action||e.isMatch?e._e():n("h3",[e._v(e._s(e.member.name)+" "),n("br"),n("br"),e._v(" likes you!")]),"chat"===e.action?n("h3",[e._v(e._s(e.member.name)+" "),n("br"),n("br"),e._v(" Wants to chat")]):e._e()]),e.isMatch?n("div",{staticClass:"chat",on:{click:function(t){return e.doAction("chat")}}},[n("div",{staticClass:"icon-container flex items-center"},[n("font-awesome-icon",{attrs:{icon:"comment",size:"4x"}})],1),n("span",[e._v("Chat")])]):e._e()]),e._m(0)])},Ce=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("audio",{attrs:{id:"audio1"}},[n("source",{attrs:{src:"/assets/sounds/pop1.mp3",type:"audio/mpeg"}})])}],ke={name:"incomingLikeNotification",props:["member","action"],data:function(){return{hide:!1,secondsToClose:5e3}},computed:{isMatch:function(){return this.member.likes.likeMe&&this.member.likes.iLike},showHideClass:function(){return{hide:this.hide,show:!this.hide}},classObj:function(){return{hide:this.hide,like:"like"===this.action,chat:"chat"===this.action}}},methods:{doAction:function(e){var t=this;setTimeout(function(){switch(e){case"chat":t.$emit("chat",t.member);break;case"view-details":t.$emit("viewDetails",t.member);break}},500)}},mounted:function(){document.querySelector("#audio1").play()},created:function(){var e=this;setTimeout(function(){return e.hide=!0},this.secondsToClose),setTimeout(function(){return e.$emit("close")},this.secondsToClose+1e3)}},Ie=ke,we=(n("18b5"),Object(ue["a"])(Ie,ye,Ce,!1,null,"69262f61",null)),_e=we.exports,Ae=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.loggedInUser?s("header",{staticClass:"app-header flex"},[s("nav",{staticClass:"nav-content-container flex items-center",attrs:{id:"nav"}},[s("div",{staticClass:"logo-name flex items-center"},[s("router-link",{attrs:{to:"/"}},[s("img",{staticClass:"logo",attrs:{src:n("0510"),alt:"logo"}})]),e.loggedInUser?s("div",{staticClass:"userName"},[e._v("Welcome, "+e._s(e.loggedInUser.name))]):e._e()],1),s("ul",{staticClass:"nav-links flex items-center",class:{open:e.isOpen},attrs:{id:"nav-links"}},[e.loggedInUser?s("li",{staticClass:"nav-link",on:{click:e.toProfile}},[e._v("My Profile")]):e._e(),s("li",{staticClass:"nav-link",on:{click:e.getMatch}},[e._v("Matches")]),s("li",{staticClass:"nav-link",on:{click:e.toMsgs}},[e._v("Messages ("+e._s(e.msgs.length)+")")]),s("li",{staticClass:"nav-link",on:{click:e.toGallery}},[e._v("Gallery")]),s("li",{staticClass:"nav-link",on:{click:function(t){return e.$emit("logout")}}},[e._v("Logout")])]),s("button",{staticClass:"toggle-menu-btn fa",attrs:{alt:"Open main menu"},on:{click:e.toggleMenu}},[e._v("")]),s("div",{staticClass:"toggle-menu-screen screen",class:{open:e.isOpen},attrs:{alt:"toggle main menu"},on:{click:e.toggleMenu}})])]):e._e()},Me=[],xe={name:"app-header",props:["loggedInUser"],data:function(){return{isOpen:!1}},computed:{msgs:function(){return this.$store.getters.msgs}},watch:{loggedInUser:function(){this.loggedInUser&&this.$store.dispatch({type:"getTopMsgs"})}},methods:{getMatch:function(){this.$router.push("/match")},toProfile:function(){this.$router.push("/user/".concat(this.loggedInUser._id))},toGallery:function(){this.$router.push("/")},toMsgs:function(){this.$router.push("/msg")},toggleMenu:function(){this.isOpen=!this.isOpen}}},Ue=xe,Oe=(n("a05b"),Object(ue["a"])(Ue,Ae,Me,!1,null,"109c145c",null)),Se=Oe.exports,$e=n("f499"),Be=n.n($e),Fe={saveToStorage:Re,getFromStorage:je};function Re(e,t){localStorage.setItem(e,Be()(t))}function je(e){var t=localStorage.getItem(e);return t?JSON.parse(t):t}var Ee={name:"App",data:function(){return{memberToChat:null,memberForNotif:null,loginFailed:!1,showLogin:!1,notifAction:""}},computed:{loggedInUser:function(){return console.log("this.$store.getters.loggedInUser: ",this.$store.getters.loggedInUser),this.$store.getters.loggedInUser},newMembersWhoWatchedMeCount:function(){return this.$store.getters.newMembersWhoWatchedCount}},methods:{openNotif:function(e,t){this.memberForNotif=t,this.notifAction=e},startChat:function(e){y.$emit(k,e)},openChatFromNotif:function(e){this.memberForNotif=null,this.openChat(e)},viewMemberDetailsFromNotif:function(e){this.memberForNotif=null,this.$router.push("/member/"+e._id)},openChat:function(e){this.memberToChat=e,this.$store.commit({type:"startChat",member:e})},closeChat:function(){this.memberToChat=null},gotoMembersWhoWatchedMe:function(){this.$store.dispatch({type:"markWatchedMeMembersAsRead"}),this.$router.push("/members/watched")},login:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return console.log("user cred",t),this.loginFailed=!1,e.prev=2,e.next=5,this.$store.dispatch({type:"loginUser",userCredentials:t});case 5:n=e.sent,Fe.saveToStorage("loggedInUser",n),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](2),this.loginFailed=!0;case 12:case"end":return e.stop()}},e,this,[[2,9]])}));function t(t){return e.apply(this,arguments)}return t}(),signup:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return console.log("Signing up (HOME):",t),this.loginFailed=!1,e.prev=2,e.next=5,this.$store.dispatch({type:"signupUser",userCredentials:t});case 5:n=e.sent,Fe.saveToStorage("loggedInUser",n),this.$router.push("/user/".concat(n._id)),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](2),this.loginFailed=!0;case 13:case"end":return e.stop()}},e,this,[[2,10]])}));function t(t){return e.apply(this,arguments)}return t}(),logout:function(){localStorage.removeItem("loggedInUser"),this.$store.dispatch({type:"logoutUser"})}},created:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(){var t,n=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=Fe.getFromStorage("loggedInUser"),!t){e.next=6;break}return e.next=4,this.login({name:t.name,pass:"123"});case 4:e.next=7;break;case 6:this.showLogin=!0;case 7:y.$on(k,function(e){console.log(k,e),n.openChat(e)}),y.$on(C,function(e){console.log(C,e),n.openNotif("like",e)}),y.$on(I,function(e){var t=e.from;console.log(I,t),n.$store.state.chat.member||n.$store.dispatch({type:"loadMemberById",memberId:t}).then(function(e){n.openNotif("chat",e)})});case 10:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),components:{chat:de,login:ve,Notif:_e,appHeader:Se}},Te=Ee,Le=(n("5c0b"),Object(ue["a"])(Te,i,r,!1,null,null,null)),Ne=Le.exports,De=n("8c4f"),Pe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.loggedInUser?n("section",{staticClass:"home-page"},[n("div",{staticClass:"home-content-container"},[n("div",{staticClass:"member-filter-container"},[n("member-filter",{on:{setFilter:e.setFilter}})],1),n("main",[n("member-list",{attrs:{members:e.members},on:{notLike:e.notLikeMember,like:e.addLike,chat:e.startChat}})],1)])]):e._e()},We=[],He=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"member-list"},[n("ul",{staticClass:"flex content-center"},e._l(e.members,function(t){return n("li",{key:t._id,staticClass:"member",attrs:{member:t}},[n("member-preview",{attrs:{member:t},on:{notLike:function(t){return e.$emit("notLike",t)},like:function(t){return e.$emit("like",t)},chat:function(t){return e.$emit("chat",t)}}})],1)}),0)])},Ge=[],Qe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"member-preview"},[n("router-link",{attrs:{to:"/member/"+e.member._id}},[n("div",{staticClass:"imageContainer",style:{backgroundImage:"url("+e.member.mainImage+")"}}),this.member.online?n("div",{staticClass:"status-wrapper flex space-between items-center"},[n("span",{staticClass:"online-status",class:{on:this.member.online,off:!this.member.online},attrs:{title:"Online"}})]):e._e()]),n("h2",{staticClass:"member-name"},[e._v(e._s(e.member.name)+", "+e._s(e.memberAge))]),n("div",{staticClass:"actions-wrapper"},[n("span",{staticClass:"like-status",attrs:{title:e.likeStatus},on:{click:function(t){return t.stopPropagation(),e.$emit("like",e.member)}}},[n("font-awesome-icon",{staticClass:"heart my-heart",class:{on:this.member.likes.iLike,off:!this.member.likes.iLike},attrs:{icon:"heart"}}),n("font-awesome-icon",{staticClass:"heart member-heart",class:{on:this.member.likes.likeMe,off:!this.member.likes.likeMe},attrs:{icon:"heart"}})],1),e.isMatch?n("div",{staticClass:"btn-chat",on:{click:function(t){return e.$emit("chat",e.member)}}},[n("font-awesome-icon",{attrs:{icon:"comment",title:"Click to start chat"}})],1):e._e(),n("div",[n("font-awesome-icon",{staticClass:"notLike",attrs:{icon:"times",title:"Click to remove"},on:{click:function(t){return t.stopPropagation(),e.$emit("notLike",e.member._id)}}})],1)]),n("div",{staticClass:"member-prop"},[e._v(e._s(e.member.city)+", Israel")]),n("div",{staticClass:"member-prop"},[e._v(e._s(e.familyDesc))])],1)},ze=[],Ye=n("e814"),Ke=n.n(Ye),Ze={props:["member"],computed:{memberAge:function(){var e=+this.member.dateOfBirth.substring(0,4);return(new Date).getFullYear()-e},likeStatus:function(){if(this.member.likes){if(this.member.likes.likeMe&&this.member.likes.iLike)return"YA'! You Found a Match";if(!this.member.likes.likeMe&&!this.member.likes.iLike)return"Click to like ".concat(this.member.name);if(this.member.likes.likeMe)return"".concat(this.member.name," likes you");if(this.member.likes.iLike)return"You like  ".concat(this.member.name)}},familyDesc:function(){var e=0===Ke()(this.member.numOfChildren)?"No Children":" (+".concat(this.member.numOfChildren,")");return"".concat(this.member.maritalStatus,", ").concat(e,"   ")},isMatch:function(){return this.member.likes.likeMe&&this.member.likes.iLike}}},qe=Ze,Xe=(n("cc40"),Object(ue["a"])(qe,Qe,ze,!1,null,"a77d172c",null)),Je=Xe.exports,Ve={props:["members"],components:{memberPreview:Je}},et=Ve,tt=(n("fe33"),Object(ue["a"])(et,He,Ge,!1,null,"627e2e38",null)),nt=tt.exports,st=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"member-filter "},[n("form",[n("div",{staticClass:"filter-sections flex"},[n("div",{staticClass:"filter-section",class:{active:"sex"===e.activeSection}},[n("button",{staticClass:"btn btn-filter",on:{click:function(t){return e.openFilterSection("sex")}}},[e._v("Gender")]),n("div",{staticClass:"filter-details-wrapper relative"},[n("div",{staticClass:"filter-details"},[n("el-radio-group",{attrs:{size:"small"},on:{change:e.setFilter},model:{value:e.filterBy.gender,callback:function(t){e.$set(e.filterBy,"gender",t)},expression:"filterBy.gender"}},[n("el-radio-button",{attrs:{label:"female"}}),n("el-radio-button",{attrs:{label:"male"}})],1),n("div",{staticClass:"flex content-end"},[n("a",{staticClass:"btn-apply",attrs:{href:"#"},on:{click:function(t){return e.openFilterSection("")}}},[e._v("Apply")])])],1)])]),n("div",{staticClass:"filter-section",class:{active:"city"===e.activeSection}},[n("button",{staticClass:"btn btn-filter",on:{click:function(t){return e.openFilterSection("city")}}},[e._v("Location")]),n("div",{staticClass:"filter-details-wrapper relative"},[n("div",{staticClass:"filter-details"},[n("el-select",{attrs:{size:"small",placeholder:"Select location"},on:{change:e.setFilter},model:{value:e.filterBy.city,callback:function(t){e.$set(e.filterBy,"city",t)},expression:"filterBy.city"}},e._l(e.cities,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),n("div",{staticClass:"flex content-end"},[n("a",{staticClass:"btn-apply",attrs:{href:"#"},on:{click:function(t){return e.openFilterSection("")}}},[e._v("Apply")])])],1)])]),n("div",{staticClass:"filter-section",class:{active:"height"===e.activeSection}},[n("button",{staticClass:"btn btn-filter",on:{click:function(t){return e.openFilterSection("height")}}},[e._v("Height")]),n("div",{staticClass:"filter-details-wrapper relative "},[n("div",{staticClass:"filter-details"},[n("el-input",{attrs:{size:"small",type:"number",placeholder:"Enter min-height"},on:{input:e.setFilter},model:{value:e.filterBy.minHeight,callback:function(t){e.$set(e.filterBy,"minHeight",t)},expression:"filterBy.minHeight"}}),n("div",{staticClass:"flex content-end"},[n("a",{staticClass:"btn-apply",attrs:{href:"#"},on:{click:function(t){return e.openFilterSection("")}}},[e._v("Apply")])])],1)])]),n("div",{staticClass:"filter-section",class:{active:"age"===e.activeSection}},[n("button",{staticClass:"btn btn-filter",on:{click:function(t){return e.openFilterSection("age")}}},[e._v("Age")]),n("div",{staticClass:"filter-details-wrapper relative "},[n("div",{staticClass:"filter-details"},[n("div",{staticClass:"age-filter"},[n("label",[e._v("Age")]),n("el-slider",{key:e.rangeKey,attrs:{range:"",min:18,max:100},on:{change:e.setFilter},model:{value:e.filterBy.age,callback:function(t){e.$set(e.filterBy,"age",t)},expression:"filterBy.age"}})],1),n("div",{staticClass:"flex content-end"},[n("a",{staticClass:"btn-apply",attrs:{href:"#"},on:{click:function(t){return e.openFilterSection("")}}},[e._v("Apply")])])])])]),n("div",{staticClass:"filter-section"},[n("button",{staticClass:"btn btn-filter",attrs:{type:"info"},on:{click:e.clearFilter}},[e._v("Clear Filter")])])])]),n("div",{staticClass:"relative"},[n("div",{staticClass:"filter-screen",class:{show:""!==e.activeSection},on:{click:function(t){return e.openFilterSection("")}}})])])},it=[],rt={data:function(){return{filterBy:{gender:"",age:[18,100],minHeight:null,city:""},rangeKey:1,cities:[],isShowFilter:!0,activeSection:""}},computed:{loggedInUser:function(){return this.$store.getters.loggedInUser}},methods:{openFilterSection:function(e){this.activeSection=e},setFilter:function(){var e={gender:this.filterBy.gender,minAge:this.filterBy.age[0],maxAge:this.filterBy.age[1],minHeight:this.filterBy.minHeight,city:this.filterBy.city};this.$emit("setFilter",e)},clearFilter:function(){this.filterBy={gender:"",age:[18,100],minHeight:null,city:""},this.setFilter(),this.openFilterSection("")},loggedInUserSet:function(){this.filterBy.gender=this.loggedInUser.interestedIn.gender,this.filterBy.age[0]=this.loggedInUser.interestedIn.minAge,this.filterBy.age[1]=this.loggedInUser.interestedIn.maxAge}},watch:{loggedInUser:function(){this.loggedInUser&&this.loggedInUserSet(),this.setFilter()}},created:function(){var e=w.getCities();this.cities=e.map(function(e){return{value:e,label:e}}),this.cities.unshift({value:"",label:"All cities"}),this.loggedInUser&&(this.loggedInUserSet(),this.setFilter())}},at=rt,ot=(n("de1e"),Object(ue["a"])(at,st,it,!1,null,"128c8e46",null)),ct=ot.exports,lt=n("3d20"),ut=n.n(lt),mt={data:function(){return{filterBy:{gender:"",minAge:null,maxAge:null,minHeight:null,city:""}}},methods:{addLike:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return console.log("like"),e.next=3,this.$store.dispatch({type:"addLikeToMember",member:t});case 3:t.likes.iLike&&t.likes.likeMe&&ut.a.fire({title:"You have a new match !!!",type:"success",showCancelButton:!0,confirmButtonText:"Send a message",cancelButtonText:"Later"}).then(function(e){e.value&&y.$emit(k,t)});case 4:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),notLikeMember:function(e){this.$store.dispatch({type:"notLikeMember",memberId:e})},startChat:function(e){y.$emit(k,e)},setFilter:function(e){this.filterBy=e,this.$store.dispatch({type:"loadMembers",filterBy:this.filterBy})}},computed:{loggedInUser:function(){return this.$store.getters.loggedInUser},members:function(){return this.$store.getters.members}},created:function(){this.loggedInUser&&(this.filterBy.gender=this.loggedInUser.interestedIn.gender,this.filterBy.minAge=this.loggedInUser.interestedIn.minAge,this.filterBy.maxAge=this.loggedInUser.interestedIn.maxAge,this.$store.dispatch({type:"loadMembers",filterBy:this.filterBy}))},watched:{loggedInUser:function(){this.loggedInUser&&this.$store.dispatch({type:"loadMembers",filterBy:this.filterBy})}},components:{memberList:nt,memberFilter:ct}},dt=mt,gt=(n("af25"),Object(ue["a"])(dt,Pe,We,!1,null,"15868184",null)),ht=gt.exports,ft=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.loggedInUser?n("section",{staticClass:"match-page"},[n("main",[n("member-list",{attrs:{members:e.matches},on:{chat:e.startChat}})],1)]):e._e()},pt=[],bt={data:function(){return{memberForMatch:null}},methods:{startChat:function(e){this.memberForMatch=null,y.$emit(k,e)}},computed:{loggedInUser:function(){return this.$store.getters.loggedInUser},matches:function(){return this.$store.getters.matches}},created:function(){this.loggedInUser&&this.$store.dispatch({type:"loadMatches"})},components:{memberList:nt}},vt=bt,yt=(n("a16a"),Object(ue["a"])(vt,ft,pt,!1,null,"070d08df",null)),Ct=yt.exports,kt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.user?n("section",{staticClass:"user-profile"},[e.isEdit||e.uploadImg?n("div",{staticClass:"screen"}):e._e(),n("div",{staticClass:"title"}),e.isEdit?n("edit-profile",{attrs:{profile:e.user,loggedInUser:e.loggedInUser},on:{addChanges:e.addChanges,close:function(t){e.isEdit=!1}}}):e._e(),e.uploadImg?n("upload-img",{attrs:{profile:e.user},on:{addChanges:e.addChanges,close:function(t){e.uploadImg=!1}}}):e._e(),n("div",{staticClass:"container"},[n("div",{staticClass:"main-section"},[n("div",{staticClass:"info"},[n("div",{staticClass:"name-section flex items-center"},[n("h2",[e._v(e._s(e.user.name)+", "+e._s(e.userAge))])]),e.saveBtn?n("div",{staticClass:"save-btns flex"},[n("el-button",{attrs:{type:"success"},on:{click:e.saveProfile}},[e._v("Save changes")]),n("el-button",{attrs:{type:"danger"},on:{click:e.clearChanges}},[e._v("Cancel changes")])],1):e._e(),n("hr"),n("div",{staticClass:"details-section"},[n("div",{staticClass:"gender"},[e._v(e._s(e.userGender))]),n("h4",[e._v(e._s(e.user.descr))]),n("hr"),n("h4",[e._v("Height: "+e._s(e.user.height)+"cm")]),n("h4",[e._v("I'm from "+e._s(e.user.city))]),n("h4",[e._v(e._s(e.user.maritalStatus))]),n("h4",[e._v(e._s(e.childrenInfo))]),n("hr"),n("h3",[e._v("I want to meet")]),n("h4",[e._v(e._s(e.partnerGenderNAge))]),n("div",{staticClass:"btns flex"},[n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.editProfile}},[e._v("Edit Details")]),n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){e.uploadImg=!e.uploadImg}}},[e._v("Upload pic")])],1)])]),n("div",{staticClass:"img-section"},[n("img",{staticClass:"mainImg",attrs:{src:e.user.mainImage}})])]),n("div",{staticClass:"img-gallery mt-1 mb-1"},e._l(e.user.images,function(t,s){return n("div",{key:s,staticClass:"user-img clickable",style:{backgroundImage:"url("+t+")"},on:{click:function(n){return e.changeMainImg(t,s)}}})}),0)])],1):e._e()},It=[],wt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"edit-profile flex"},[n("i",{staticClass:"el-icon-close",on:{click:function(t){return e.$emit("close")}}}),n("h1",[e._v("Edit Profile")]),n("div",{staticClass:"edit-container"},[n("div",[n("label",[e._v("I'm (gender)")]),n("el-select",{staticClass:"editInput",attrs:{size:"mini",placeholder:"Select gender"},model:{value:e.user.gender,callback:function(t){e.$set(e.user,"gender",t)},expression:"user.gender"}},e._l(e.genders,function(e,t){return n("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1)],1),n("div",[n("label",[e._v("Height")]),n("el-input-number",{staticClass:"editInput",attrs:{size:"mini"},model:{value:e.user.height,callback:function(t){e.$set(e.user,"height",t)},expression:"user.height"}})],1),n("div",[n("label",[e._v("City")]),n("el-select",{staticClass:"editInput",attrs:{size:"mini","allow-create":"",placeholder:"Choose your city"},model:{value:e.user.city,callback:function(t){e.$set(e.user,"city",t)},expression:"user.city"}},e._l(e.cities,function(e,t){return n("el-option",{key:t,attrs:{size:"mini",label:e.label,value:e.value}})}),1)],1),n("div",[n("label",[e._v("Marital status")]),n("el-select",{staticClass:"editInput",attrs:{size:"mini",placeholder:"Select your status"},model:{value:e.user.maritalStatus,callback:function(t){e.$set(e.user,"maritalStatus",t)},expression:"user.maritalStatus"}},e._l(e.statuses,function(e,t){return n("el-option",{key:t,attrs:{size:"mini",label:e.label,value:e.value}})}),1)],1),n("div",[n("label",[e._v("Children")]),n("el-input-number",{staticClass:"editInput",attrs:{size:"mini"},model:{value:e.user.numOfChildren,callback:function(t){e.$set(e.user,"numOfChildren",t)},expression:"user.numOfChildren"}})],1),n("div",[n("label",[e._v("Date of Birth")]),n("el-date-picker",{staticClass:"editInput",attrs:{type:"date",size:"mini",placeholder:"Pick a date"},model:{value:e.user.dateOfBirth,callback:function(t){e.$set(e.user,"dateOfBirth",t)},expression:"user.dateOfBirth"}})],1),n("hr"),n("h2",[e._v("Dream your partner!")]),n("h4"),n("div",[n("label",[e._v("Gender")]),n("el-select",{staticClass:"editInput",attrs:{size:"mini",placeholder:"Select gender"},model:{value:e.user.interestedIn.gender,callback:function(t){e.$set(e.user.interestedIn,"gender",t)},expression:"user.interestedIn.gender"}},e._l(e.genders,function(e,t){return n("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1)],1),n("div",[n("label",[e._v("Age")]),n("el-slider",{staticClass:"editInput",attrs:{range:"",min:18,max:120},model:{value:e.age,callback:function(t){e.age=t},expression:"age"}})],1),n("el-button",{attrs:{size:"mini",type:"info"},on:{click:e.saveProfile}},[e._v("Save Profile")])],1)])},_t=[],At={props:["profile"],data:function(){return{user:null,cities:[],statuses:[{value:"single",label:"single"},{value:"divorced",label:"divorced"},{value:"married",label:"married"},{value:"born to be free!",label:"born to be free!"}],genders:[{value:"female",label:"Woman"},{value:"male",label:"Man"}],age:[]}},created:function(){this.user=this.profile;var e=w.getCities();this.cities=e.map(function(e){return{value:e,label:e}}),this.age=[this.user.interestedIn.minAge,this.user.interestedIn.maxAge]},methods:{saveProfile:function(){this.isEdit=!1,this.saveImgBtn=!1,this.user.interestedIn.minAge=this.age[0],this.user.interestedIn.maxAge=this.age[1],this.$emit("addChanges",this.user),this.$emit("close")},editProfile:function(){this.isEdit=!0},clearChanges:function(){this.user=this.profile,this.age=[this.user.interestedIn.minAge,this.user.interestedIn.maxAge]}},computed:{userAge:function(){var e=+this.user.dateOfBirth.substring(0,4);return(new Date).getFullYear()-e},childrenInfo:function(){return this.user.numOfChildren?1===this.user.numOfChildren?"1 child":"".concat(this.user.numOfChildren," kids"):"no kids"},partnerGenderNAge:function(){return"female"===this.user.interestedIn.gender?"Woman, ".concat(this.user.interestedIn.minAge," - ").concat(this.user.interestedIn.maxAge," years old"):"Man, ".concat(this.user.interestedIn.minAge," - ").concat(this.user.interestedIn.maxAge," years old")}}},Mt=At,xt=(n("23ef"),Object(ue["a"])(Mt,wt,_t,!1,null,"70947972",null)),Ut=xt.exports,Ot=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("section",{staticClass:"upload-img flex"},[s("div",{staticClass:"top"},[s("h1",[e._v("Add new picture")]),s("i",{staticClass:"el-icon-close close",on:{click:function(t){return t.stopPropagation(),e.$emit("close")}}})]),s("form",{staticClass:"publish-form",attrs:{action:"",enctype:"multipart/form-data"},on:{submit:function(t){return t.preventDefault(),e.previewFiles(e.event)}}},[s("label",{staticClass:"input-img",attrs:{for:"takePic",title:"take a picture"}},[s("input",{staticStyle:{display:"none"},attrs:{id:"takePic",type:"file",name:"img",accept:"image/*;capture"},on:{change:e.previewFiles}}),s("i",{staticClass:"el-icon-upload"})])]),s("div",{staticClass:"preview",style:{backgroundImage:"url("+e.newImg+")"}}),e.saveImgBtn?s("div",{staticClass:"rotate flex"},[s("img",{staticClass:"left",attrs:{src:n("7321")},on:{click:function(t){return t.stopPropagation(),e.rotateLeft(t)}}}),s("img",{staticClass:"right",attrs:{src:n("379b")},on:{click:function(t){return t.stopPropagation(),e.rotateRight(t)}}})]):e._e(),e.saveImgBtn?s("el-button",{attrs:{type:"success",plain:""},on:{click:function(t){return t.stopPropagation(),e.saveImg(t)}}},[e._v("Save")]):e._e()],1)},St=[],$t={uploadImg:jt},Bt="dgdlcsa7",Ft="dgo4v1hnv",Rt="https://api.cloudinary.com/v1_1/".concat(Ft,"/image/upload");function jt(e,t){return console.log("Cloudinary service got:",e,t),t.preventDefault(),Et(e).then(function(e){return e})}function Et(e){var t=new FormData;return t.append("file",e),t.append("upload_preset",Bt),b()({url:Rt,method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:t}).then(function(e){return console.log("SECURE_URL:",e.data.secure_url),e.data.secure_url}).catch(function(e){console.error("Upload failed! Err: ",e)})}var Tt={props:["profile"],data:function(){return{user:null,file:null,newImg:null,saveImgBtn:!1}},methods:{previewFiles:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.file=t.target.files[0],console.log("file:",this.file,"event",t),e.next=4,$t.uploadImg(this.file,t);case 4:n=e.sent,this.newImg=n,this.saveImgBtn=!0;case 7:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),saveImg:function(){this.user.mainImage?this.user.images.push(this.newImg):this.user.mainImage=this.newImg,this.$emit("addChanges",this.user),this.saveImgBtn=!1},rotateRight:function(){var e="/a_90",t=this.newImg,n=t.indexOf("upload");t=t.slice(0,n+6)+e+t.slice(n+6),this.newImg=t,this.saveImgBtn=!0},rotateLeft:function(){var e="/a_-90",t=this.newImg,n=t.indexOf("upload");t=t.slice(0,n+6)+e+t.slice(n+6),this.newImg=t,this.saveImgBtn=!0}},created:function(){console.log("created, user:",this.profile),this.user=this.profile}},Lt=Tt,Nt=(n("5a49"),Object(ue["a"])(Lt,Ot,St,!1,null,"72a56c26",null)),Dt=Nt.exports,Pt={data:function(){return{user:null,saveBtn:!1,isEdit:!1,uploadImg:!1}},created:function(){var e=this,t=this.$route.params.userId;this.loggedInUser&&this.loggedInUser._id===t?this.$store.dispatch({type:"loadMemberById",memberId:t}).then(function(t){return e.user=t}):this.$router.push("/"),console.log("LoggedInUser",this.loggedInUser)},methods:{addChanges:function(e){this.user=e,this.isEdit=!1,this.uploadImg=!1,this.saveBtn=!0},changeMainImg:function(e,t){var n=this.user.mainImage;this.user.mainImage=e,this.user.images.splice(t,1,n),this.saveBtn=!0},saveProfile:function(){this.isEdit=!1,this.uploadImg=!1,console.log("Save updated PROFILE: ",this.user),this.$store.dispatch({type:"updateUser",user:this.user}),this.saveBtn=!1},editProfile:function(){this.isEdit=!0},clearChanges:function(){this.user=this.loggedInUser,this.age=[this.user.interestedIn.minAge,this.user.interestedIn.maxAge],this.saveBtn=!1},toAll:function(){this.$router.push("/")}},computed:{loggedInUser:function(){return this.$store.getters.loggedInUser},userAge:function(){var e=+this.user.dateOfBirth.substring(0,4),t=(new Date).getFullYear()-e;return t||18},childrenInfo:function(){return 0===this.user.numOfChildren?"I don't have kids":1===this.user.numOfChildren?"I have 1 child":"I have ".concat(this.user.numOfChildren," kids")},partnerGenderNAge:function(){return this.user.interestedIn.gender&&this.user.interestedIn.minAge&&this.user.interestedIn.maxAge?"female"===this.user.interestedIn.gender?"Woman, ".concat(this.user.interestedIn.minAge," - ").concat(this.user.interestedIn.maxAge," years old"):"Man, ".concat(this.user.interestedIn.minAge," - ").concat(this.user.interestedIn.maxAge," years old"):"..."},userGender:function(){return"female"===this.user.gender?"Woman":"male"===this.user.gender?"Woman":"Gender is not defined"}},watch:{loggedInUser:function(){var e=this.$route.params.userId;this.loggedInUser&&this.loggedInUser._id===e||this.$router.push("/")}},components:{editProfile:Ut,uploadImg:Dt}},Wt=Pt,Ht=(n("5774"),Object(ue["a"])(Wt,kt,It,!1,null,"74b11e76",null)),Gt=Ht.exports,Qt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.member?n("section",{staticClass:"member-details"},[n("div",{staticClass:"container"},[n("div",{staticClass:"main-section"},[n("div",{staticClass:"info"},[n("div",{staticClass:"name-section flex items-center content-center"},[n("span",{staticClass:"online-status mr-1",class:{on:this.member.online,off:!this.member.online}}),n("h1",[e._v(e._s(e.member.name)+", "+e._s(e.memberAge))])]),n("div",{staticClass:"details flex"},[n("hr"),n("h4",[e._v(e._s(e.member.descr))]),n("hr"),n("h4",[e._v("Height: "+e._s(e.member.height)+"cm")]),n("h4",[e._v("I'm from "+e._s(e.member.city))]),n("h4",[e._v("I'm "+e._s(e.member.maritalStatus))]),n("h4",[e._v("I have "+e._s(e.childrenInfo))]),n("hr"),n("h2",[e._v("I want to meet:")]),n("h4",[e._v(e._s(e.partnerGenderNAge))])])]),n("div",{staticClass:"main-img"},[n("div",{staticClass:"mainImg",style:{backgroundImage:"url("+e.member.mainImage+")"}}),n("div",{staticClass:"likes-panel clickable"},[n("font-awesome-icon",{staticClass:"like",attrs:{icon:"heart"},on:{click:function(t){return t.stopPropagation(),e.like(t)}}}),n("font-awesome-icon",{staticClass:"notLike",attrs:{icon:"times"},on:{click:function(t){return t.stopPropagation(),e.notLike(t)}}})],1)])]),n("div",{staticClass:"img-gallery mt-1 mb-1"},e._l(e.member.images,function(t,s){return n("div",{key:s,staticClass:"member-img clickable",style:{backgroundImage:"url("+t+")"},on:{click:function(n){return e.changeMainImg(t,s)}}})}),0)])]):e._e()},zt=[],Yt={data:function(){return{member:null}},methods:{changeMainImg:function(e,t){var n=this.member.mainImage;this.member.mainImage=e,this.member.images.splice(t,1,n)}},computed:{memberAge:function(){var e=+this.member.dateOfBirth.substring(0,4);return(new Date).getFullYear()-e},childrenInfo:function(){return this.member.numOfChildren?1===this.member.numOfChildren?"1 child":"".concat(this.member.numOfChildren," kids"):"no kids"},partnerGenderNAge:function(){return"female"===this.member.interestedIn.gender?"Woman, ".concat(this.member.interestedIn.minAge," - ").concat(this.member.interestedIn.maxAge," years old"):"Man, ".concat(this.member.interestedIn.minAge," - ").concat(this.member.interestedIn.maxAge," years old")}},created:function(){var e=this,t=this.$route.params.userId;this.$store.dispatch({type:"loadMemberById",memberId:t}).then(function(t){return e.member=t}),this.$store.dispatch({type:"watchMember",memberId:t})}},Kt=Yt,Zt=(n("cae9"),Object(ue["a"])(Kt,Qt,zt,!1,null,"1163d7aa",null)),qt=Zt.exports,Xt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",[e._v("user profile edit")])},Jt=[],Vt={},en=Vt,tn=Object(ue["a"])(en,Xt,Jt,!1,null,null,null),nn=tn.exports,sn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"msg-list-cmp"},[n("ul",e._l(e.msgs,function(e,t){return n("msgPrev",{key:t,attrs:{msg:e}})}),1)])},rn=[],an=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"msg-prev-cmp"},[n("li",{staticClass:"flex space-between"},[n("div",{staticClass:"img-wrapper"},[n("img",{attrs:{src:e.msg.from.mainImage,alt:"user image"}})]),n("div",{staticClass:"txt-wrapper"},[n("h3",[e._v(e._s(e.msg.from.name))]),e._v("\n            "+e._s(e.msg.txt)+"\n        ")])])])},on=[],cn={name:"msgPrev",props:["msg"]},ln=cn,un=(n("1f81"),Object(ue["a"])(ln,an,on,!1,null,"a694e59a",null)),mn=un.exports,dn={name:"msgList",computed:{msgs:function(){return this.$store.getters.msgs}},components:{msgPrev:mn}},gn=dn,hn=(n("2b3d"),Object(ue["a"])(gn,sn,rn,!1,null,"7ac59abc",null)),fn=hn.exports;s["default"].use(De["a"]);var pn=new De["a"]({routes:[{path:"/",component:ht},{path:"/match",component:Ct},{path:"/user/edit/:userId?",component:nn},{path:"/user/:userId",component:Gt},{path:"/member/:userId",component:qt},{path:"/msg",component:fn}]}),bn=n("9483");Object(bn["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});var vn=n("ecee"),yn=n("ad3d"),Cn=n("c074"),kn=n("5c96"),In=n.n(kn),wn=n("b2d6"),_n=n.n(wn);n("0fae"),n("f572");vn["c"].add(Cn["b"]),vn["c"].add(Cn["d"]),vn["c"].add(Cn["a"]),vn["c"].add(Cn["c"]),s["default"].component("font-awesome-icon",yn["a"]),s["default"].use(In.a,{locale:_n.a}),s["default"].config.productionTip=!1,new s["default"]({router:pn,store:J,render:function(e){return e(Ne)}}).$mount("#app")},5774:function(e,t,n){"use strict";var s=n("db27"),i=n.n(s);i.a},"5a49":function(e,t,n){"use strict";var s=n("c14d"),i=n.n(s);i.a},"5c0b":function(e,t,n){"use strict";var s=n("5e27"),i=n.n(s);i.a},"5e27":function(e,t,n){},6236:function(e,t,n){},"63be":function(e,t,n){},6736:function(e,t,n){},"6b3d":function(e,t,n){},"6d69":function(e,t,n){"use strict";var s=n("db17"),i=n.n(s);i.a},7321:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAANfSURBVGhD7dpZyA1hHMfx15JddhHZcoELpIhSKCRKsiRZkpKQC+SCsoQLIUuKbOVCEm6suXTBjcgaF1JCluz7vnx/b+epf3PmnDNzZuY9M73nV5+877zzzjP/d+Y88zzPqKkPaZD7N9OZgw94gbHaECA9MQ/7cQnP8BH/8AdvcQ9nsQkT0AKJRVfiPXQCcgeF0h7LcQ1u/zC+4ATGI/Y7oA1sYyrKm47YDvcXj4Ou1nTEVlCxQtTIIryG3aeYr9Ct5fczP5fRD5FTqJBOuAD7M+sHzmMVRqMbbJqhP6ZhJ+7D7zjyDYsRKX6FDMAjs816iGXQ5yVsBuMAdOJ+xz6Mxigr3kL0l37j2SbatgRlN2TSA8fgbUNOowlCx1uIn4voirgzCS/hbe8UGiFUShVyEB3QLifublNX5ya87W5DqAS5ItYrjEKcUcei7ti28xeTEThhC5EriDvd8QS2Hd12gTuVcgpRt5xE1F3r6W/b0hAoUFpDXWpQKqIXkspS2EJ+oS8yl4a4AVuMni+ZjEbKthANe9oic1EXfxe2mIXIZDSGs4WcQyajDsUWot4s9NM+LVEvaYsZhEzmOGwhmlr7RmOoOEazSWUjbCEbkJf5+AwtOkzVhhRGky1byB7kRYM/t4O6ujRmNmwhe5EXjS7dDppjpzFjYAvZirxo3cntoKLS2LXpwXgLOsenGIi86DK5QrROldZo7DUMrWq/84nGLmuwO/d1NdXEHD0UZ0ELaWnKOGigeAaa05eMdnQf+vXakIJoteYd3Hlp4btoWsLtLFqc64NKZzPseenVRMnchv2lHahktM6loZM9Jy3RlozGWfaXDqGSOQp7Po+hBfGS0dNzLX5DC9e9Ucl4V+31Ni1UCj456zh6QLsiTmpDHClrVTxiNObT7T4l93Wk6J7UCt9PaHl0CDKZobD36XesRpwjZL3hOoKrWKANSUSF2PmKswtRo4edpqyf4I6r+VAS719qsw7eYvTMiZKR0NTaHlPUjl7LJZaJ0H8EcA3ugzd6h6Erpdmb3sHPRKFpwXPYAoodN/bopNSLzIX3bdVw+J3Ydfh9nh7A7qf3IX7HrfOshD0xawS80WdPK+2akWrY0RypSBf4vQHWekBTZCp64zUDK7AFmj53RjX1KDU1/wF+cqZmtjGu3gAAAABJRU5ErkJggg=="},"85f1":function(e,t,n){},9317:function(e,t,n){},"970d":function(e,t,n){"use strict";var s=n("6736"),i=n.n(s);i.a},a05b:function(e,t,n){"use strict";var s=n("63be"),i=n.n(s);i.a},a16a:function(e,t,n){"use strict";var s=n("a4ff"),i=n.n(s);i.a},a4ff:function(e,t,n){},af25:function(e,t,n){"use strict";var s=n("6236"),i=n.n(s);i.a},c14d:function(e,t,n){},cae9:function(e,t,n){"use strict";var s=n("3551"),i=n.n(s);i.a},cc40:function(e,t,n){"use strict";var s=n("85f1"),i=n.n(s);i.a},d029:function(e,t,n){},daea:function(e,t,n){},db17:function(e,t,n){},db27:function(e,t,n){},de1e:function(e,t,n){"use strict";var s=n("340a"),i=n.n(s);i.a},f572:function(e,t,n){},fe33:function(e,t,n){"use strict";var s=n("9317"),i=n.n(s);i.a}});
//# sourceMappingURL=app.3fe80fc4.js.map